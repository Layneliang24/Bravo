# Bravoé¡¹ç›®

## è¯´æ˜

Bravoé¡¹ç›®æ˜¯åŸºäºAlphaé¡¹ç›®è¿›è¡Œå‡çº§æ”¹é€ çš„é¡¹ç›®ï¼Œè¦å½»åº•å‘Šåˆ«alphaé¡¹ç›®å…ˆå¤©æ€§æµ‹è¯•ä½“ç³»ç¼ºé™·ï¼Œæ–‡æ¡£æ··ä¹±ï¼ŒCICDé˜»ç¢ï¼Œä»£ç è‡ƒè‚¿ç­‰æƒ…å†µã€‚



## é¡¹ç›®åˆæ­¥æ¡†æ¶ï¼š

### Bravoé¡¹ç›®çº§æ¡†æ¶

```mysql
Bravo/                          # ä»“åº“æ ¹
â”œâ”€â”€ .cursor/                    # AI-MCP è§„åˆ™ & å·¥å…·é“¾
â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”œâ”€â”€ django_split.mdc
â”‚   â”‚   â”œâ”€â”€ vue_component.mdc
â”‚   â”‚   â””â”€â”€ test_coverage.mdc
â”‚   â””â”€â”€ mcp.json
â”œâ”€â”€ .github/                    # ç»Ÿä¸€ CI/CD
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ ci.yml
â”‚   â”‚   â”œâ”€â”€ e2e.yml
â”‚   â”‚   â””â”€â”€ deploy-cloudrun.yml
â”œâ”€â”€ .envs/                      # 12-Factor ç¯å¢ƒåˆ†ç¦»
â”‚   â”œâ”€â”€ .env.local
â”‚   â”œâ”€â”€ .env.staging
â”‚   â””â”€â”€ .env.prod
â”œâ”€â”€ backend/                    # Django åç«¯ï¼ˆå¯ç‹¬ç«‹ä»“åº“ï¼‰
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ requirements/
â”‚   â”‚   â”œâ”€â”€ base.txt
â”‚   â”‚   â”œâ”€â”€ local.txt
â”‚   â”‚   â””â”€â”€ prod.txt
â”‚   â”œâ”€â”€ manage.py
â”‚   â”œâ”€â”€ bravo/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ asgi.py
â”‚   â”‚   â”œâ”€â”€ wsgi.py
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â”œâ”€â”€ local.py
â”‚   â”‚   â”‚   â””â”€â”€ prod.py
â”‚   â”‚   â””â”€â”€ urls.py
â”‚   â”œâ”€â”€ apps/                   # ä¸šåŠ¡æ¨¡å—ï¼ˆDomain-Drivenï¼‰
â”‚   â”‚   â”œâ”€â”€ users/              # ç”¨æˆ·åŸŸ
â”‚   â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”‚   â”œâ”€â”€ api.py          # Django-Ninja è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # çº¯ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ selectors.py    # å¤æ‚æŸ¥è¯¢ï¼ˆdjango-query-builderï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ filters.py      # django-filter
â”‚   â”‚   â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ test_models.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ test_api.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ test_integration.py
â”‚   â”‚   â”‚   â””â”€â”€ factories.py    # Factory Boy
â”‚   â”‚   â”œâ”€â”€ blog/               # åšå®¢åŸŸ
â”‚   â”‚   â”œâ”€â”€ english/            # è‹±è¯­å­¦ä¹ åŸŸ
â”‚   â”‚   â”œâ”€â”€ jobs/               # æ±‚èŒåŸŸ
â”‚   â”‚   â””â”€â”€ common/             # å…±äº«å·¥å…·ï¼ˆæƒé™ã€åˆ†é¡µï¼‰
â”‚   â”‚       â”œâ”€â”€ permissions.py
â”‚   â”‚       â””â”€â”€ pagination.py
â”‚   â”œâ”€â”€ ai_pipeline/            # AI é€šç”¨èƒ½åŠ›ï¼ˆå¯æ‹†å¾®æœåŠ¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ clients/            # OpenAI/Azure/Claude å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡çº§å°è£…ï¼ˆå¸¦é™çº§ã€ç¼“å­˜ï¼‰
â”‚   â”‚   â”œâ”€â”€ tasks.py            # Celery å¼‚æ­¥
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”œâ”€â”€ feature_flags/          # Django-Flags åŠŸèƒ½å¼€å…³
â”‚   â”œâ”€â”€ tests/                  # é¡¶å±‚æ±‡æ€»
â”‚   â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â”œâ”€â”€ performance/
â”‚   â”‚   â””â”€â”€ factories/
â”‚   â””â”€â”€ scripts/                # æ•°æ®è¿ç§»ã€åˆå§‹åŒ–è¶…ç®¡
â”œâ”€â”€ frontend/                   # Vue3 + Vite + TS
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tests/                  # é¡¶å±‚æ±‡æ€»ï¼ˆæŠ¥å‘Šã€é…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ unit/vitest.config.ts
â”‚   â”‚   â”œâ”€â”€ e2e/playwright.config.ts
â”‚   â”‚   â””â”€â”€ coverage/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”œâ”€â”€ router/index.ts
â”‚   â”‚   â”œâ”€â”€ stores/index.ts
â”‚   â”‚   â”œâ”€â”€ api/                # è‡ªåŠ¨ç”Ÿæˆçš„ API Clientï¼ˆOpenAPIï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ blog.ts
â”‚   â”‚   â”‚   â””â”€â”€ english.ts
â”‚   â”‚   â”œâ”€â”€ components/         # åŸå­ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseButton.vue
â”‚   â”‚   â”‚   â””â”€â”€ BaseButton.spec.ts
â”‚   â”‚   â”œâ”€â”€ views/              # é¡µé¢çº§
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ Login.e2e.ts
â”‚   â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â””â”€â”€ .env.[mode]             # Vite æ¨¡å¼å˜é‡
â”œâ”€â”€ e2e/                        # è·¨ç«¯ E2Eï¼ˆçœŸåç«¯+çœŸæµè§ˆå™¨ï¼‰
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ auth.login.spec.ts
â”‚   â”‚   â””â”€â”€ english.learn.spec.ts
â”‚   â””â”€â”€ playwright.config.ts
â”œâ”€â”€ tests/                      # é¡¹ç›®çº§æ±‡æ€»æŠ¥å‘Š
â”‚   â”œâ”€â”€ allure-results/
â”‚   â”œâ”€â”€ coverage/
â”‚   â””â”€â”€ reports/
â”œâ”€â”€ k8s/                        # Kubernetes  manifests
â”‚   â”œâ”€â”€ base/
â”‚   â”œâ”€â”€ overlays/
â”‚   â””â”€â”€ helm-bravo/
â”œâ”€â”€ scripts/                    # ä¸€é”®å‘½ä»¤
â”‚   â”œâ”€â”€ dev.sh
â”‚   â”œâ”€â”€ build.sh
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ docker-compose.yml          # æœ¬åœ°å…¨æ ˆ
â”œâ”€â”€ docker-compose.prod.yml     # ç”Ÿäº§çº§ï¼ˆå« replicasï¼‰
â”œâ”€â”€ Makefile                    # å¸¸ç”¨å‘½ä»¤å°è£…
â”œâ”€â”€ pyproject.toml              # Black/isort/pytest é…ç½®
â”œâ”€â”€ .pre-commit-config.yaml
â””â”€â”€ README.md
```

æ¨¡å—çº§ã€Œæ”¾ä»€ä¹ˆæ–‡ä»¶ã€é€ŸæŸ¥ï¼ˆAI ç”Ÿæˆå‘½ä»¤ä¸€å¹¶ç»™ï¼‰

| æ¨¡å—     | ç›®å½•                       | å…³é”®æ–‡ä»¶                                                 | AI ä¸€é”®ç”Ÿæˆï¼ˆCursorï¼‰                             |
| :------- | :------------------------- | :------------------------------------------------------- | :------------------------------------------------ |
| ç”¨æˆ·åŸŸ   | `backend/apps/users/`      | `models.py` `api.py` `services/` `selectors.py` `tests/` | `> MCP: Django-Ninja CRUD users + test`           |
| åšå®¢åŸŸ   | `backend/apps/blog/`       | `models.py` `api.py` `signals.py` `tests/`               | `> MCP: Django blog app with tag & category`      |
| è‹±è¯­åŸŸ   | `backend/apps/english/`    | `models.py` `api.py` `ai_client.py` `tests/`             | `> MCP: English learning domain with AI tutor`    |
| AI ç®¡é“  | `backend/ai_pipeline/`     | `clients/` `services/` `tasks.py` `tests/`               | `> MCP: AI pipeline with failover + cost monitor` |
| å‰ç«¯ç»„ä»¶ | `frontend/src/components/` | `xx.vue` `xx.spec.ts` `xx.stories.ts`                    | `> MCP: Vue3 SFC + test + story`                  |
| å‰ç«¯è§†å›¾ | `frontend/src/views/`      | `xx.vue` `xx.spec.ts` `xx.e2e.ts`                        | `> MCP: Vue3 view with router + pinia + test`     |
| E2E      | `e2e/tests/`               | `*.spec.ts`                                              | `> MCP: Playwright E2E flow for english learning` |

------

ä¸€é”®è·‘å‘½ä»¤ï¼ˆMakefileï¼‰

```makefile
dev:            ## æœ¬åœ°çƒ­é‡è½½
	docker compose up -d
install-be:     ## åç«¯å®‰è£… + é¢„æäº¤é’©å­
	cd backend && python -m venv .venv && .venv/bin/pip install -r requirements/local.txt
install-fe:     ## å‰ç«¯å®‰è£…
	cd frontend && pnpm install
test:           ## å…¨é‡æµ‹è¯•
	docker compose exec backend pytest && cd frontend && pnpm run test:ci && cd ../e2e && pnpm run test
coverage:       ## åˆå¹¶è¦†ç›–ç‡
	python -m coverage combine backend/tests/reports frontend/tests/reports && coverage html
deploy:         ## æ¨é€åˆ° CloudRun
	gcloud builds submit --config cloudbuild.yaml
```

### åŸAlphaé¡¹ç›®ç›®å½•ï¼š

````css
# Alpha æŠ€æœ¯å…±äº«å¹³å° - å®Œæ•´é¡¹ç›®ç›®å½•æ¡†æ¶

## é¡¹ç›®æ¦‚è¿°
Alpha æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æŠ€æœ¯å…±äº«å¹³å°ï¼Œé›†æˆäº†è‹±è¯­å­¦ä¹ ã€æ±‚èŒç®¡ç†ã€å¾…åŠç¬”è®°ã€AIåŠ©æ‰‹å’Œæœç´¢åŠŸèƒ½ã€‚é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ã€‚

## æ•´ä½“ç›®å½•ç»“æ„

```
alpha/
â”œâ”€â”€ .cursor/                          # Cursor IDE é…ç½®
â”‚   â”œâ”€â”€ mcp.json                      # MCP æœåŠ¡å™¨é…ç½®
â”‚   â””â”€â”€ rules/                        # ä»£ç è§„åˆ™å’Œå·¥ä½œæµ
â”‚       â”œâ”€â”€ cursor_rules.mdc
â”‚       â”œâ”€â”€ self_improve.mdc
â”‚       â””â”€â”€ taskmaster/
â”‚           â”œâ”€â”€ dev_workflow.mdc
â”‚           â””â”€â”€ taskmaster.mdc
â”œâ”€â”€ .github/                          # GitHub å·¥ä½œæµå’Œæ¨¡æ¿
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/
â”‚   â”‚   â”œâ”€â”€ example_requirement_template.md
â”‚   â”‚   â””â”€â”€ idiomatic_expressions_requirement_template.md
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml                    # æŒç»­é›†æˆ
â”‚       â”œâ”€â”€ deploy-staged.yml         # é¢„å‘å¸ƒéƒ¨ç½²
â”‚       â”œâ”€â”€ deploy.yml                # ç”Ÿäº§éƒ¨ç½²
â”‚       â”œâ”€â”€ e2e.yml                   # E2E æµ‹è¯•
â”‚       â””â”€â”€ test.yml                  # å•å…ƒæµ‹è¯•
â”œâ”€â”€ .taskmaster/                      # TaskMaster AI é¡¹ç›®ç®¡ç†
â”‚   â”œâ”€â”€ config.json                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ state.json                    # çŠ¶æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ docs/                         # é¡¹ç›®éœ€æ±‚æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ ai-service-config-ui-prd.txt
â”‚   â”‚   â”œâ”€â”€ frontend-js-error-fix-analysis-prd.txt
â”‚   â”‚   â”œâ”€â”€ frontend-testing-and-fix-prd.txt
â”‚   â”‚   â”œâ”€â”€ idiomatic_expressions_prd.txt
â”‚   â”‚   â”œâ”€â”€ super_reliable_test_system_rebuild.txt
â”‚   â”‚   â”œâ”€â”€ TEST_SYSTEM_REBUILD_PLAN.md
â”‚   â”‚   â””â”€â”€ TEST_SYSTEM_REBUILD_PRD.md
â”‚   â”œâ”€â”€ reports/                      # ä»»åŠ¡å¤æ‚åº¦æŠ¥å‘Š
â”‚   â”‚   â”œâ”€â”€ task-complexity-report_ai-config-ui.json
â”‚   â”‚   â””â”€â”€ task-complexity-report_feature-test_task_master.json
â”‚   â””â”€â”€ tasks/                        # ä»»åŠ¡ç®¡ç†æ–‡ä»¶
â”‚       â”œâ”€â”€ tasks.json
â”‚       â”œâ”€â”€ js-error-fix-tasks.json
â”‚       â””â”€â”€ task_*.txt
â”œâ”€â”€ ai_pipeline/                      # AI ç®¡é“æœåŠ¡
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ processors/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ backend/                          # Django åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ alpha/                        # Django é¡¹ç›®é…ç½®
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ asgi.py                   # ASGI å…¥å£
â”‚   â”‚   â”œâ”€â”€ celery.py                 # Celery é…ç½®
â”‚   â”‚   â”œâ”€â”€ settings.py               # Django è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ urls.py                   # URL è·¯ç”±
â”‚   â”‚   â””â”€â”€ wsgi.py                   # WSGI å…¥å£
â”‚   â”œâ”€â”€ apps/                         # Django åº”ç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ai/                       # AI æœåŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ migrations/           # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”‚   â”œâ”€â”€ services/             # AI æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cost_monitor.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ degradation.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ failover_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ health_check_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ health_monitor.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ key_manager.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ load_balancer.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model_discovery.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ monitoring_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ quality_assessor.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rate_limiter.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ token_statistics.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ tutor.py
â”‚   â”‚   â”‚   â”œâ”€â”€ tests/                # AI æ¨¡å—æµ‹è¯•
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py
â”‚   â”‚   â”‚   â”œâ”€â”€ apps.py
â”‚   â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”‚   â”œâ”€â”€ monitoring_models.py
â”‚   â”‚   â”‚   â”œâ”€â”€ routing.py
â”‚   â”‚   â”‚   â”œâ”€â”€ serializers.py
â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.py
â”‚   â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”‚   â””â”€â”€ websocket_service.py
â”‚   â”‚   â”œâ”€â”€ api/                      # API æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ cache_middleware.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cache_strategy.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cache_views.py
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ articles/                 # æ–‡ç« ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ categories/               # åˆ†ç±»ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ common/                   # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ english/                  # è‹±è¯­å­¦ä¹ æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ serializers/
â”‚   â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ jobs/                     # æ±‚èŒç®¡ç†
â”‚   â”‚   â”œâ”€â”€ links/                    # é“¾æ¥ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ rbac/                     # æƒé™æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ search/                   # æœç´¢åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ todos/                    # å¾…åŠäº‹é¡¹
â”‚   â”‚   â””â”€â”€ users/                    # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ feature_flags/                # åŠŸèƒ½å¼€å…³
â”‚   â”œâ”€â”€ tests/                        # åç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ Dockerfile                    # Docker æ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ manage.py                     # Django ç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ pytest.ini                   # pytest é…ç½®
â”‚   â””â”€â”€ requirements.txt              # Python ä¾èµ–
â”œâ”€â”€ docs/                             # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                          # API æ–‡æ¡£
â”‚   â”œâ”€â”€ deployment/                   # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ development/                  # å¼€å‘æ–‡æ¡£
â”œâ”€â”€ e2e/                              # E2E æµ‹è¯•é…ç½®
â”œâ”€â”€ frontend/                         # Vue.js å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ api/                      # API æ¥å£å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ english.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jobs.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ components/               # Vue ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/                   # AI ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AIAssistantChat.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AIConfigPanel.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ common/               # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BaseButton.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BaseCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BaseDialog.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ english/              # è‹±è¯­å­¦ä¹ ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ExpressionCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LearningDashboard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LearningChart.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ jobs/                 # æ±‚èŒç®¡ç†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/               # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppSidebar.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AppFooter.vue
â”‚   â”‚   â”‚   â””â”€â”€ todos/                # å¾…åŠäº‹é¡¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ composables/              # Vue ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useApi.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useNotification.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ directives/               # Vue æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ hooks/                    # React é£æ ¼çš„ hooks
â”‚   â”‚   â”œâ”€â”€ i18n/                     # å›½é™…åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ zh.json
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ mocks/                    # Mock æ•°æ®
â”‚   â”‚   â”œâ”€â”€ router/                   # Vue Router é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ routes.ts
â”‚   â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ aiService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ englishService.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ stores/                   # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ aiStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ englishStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ learningStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ styles/                   # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ global.css
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.css
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”‚   â”œâ”€â”€ views/                    # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AIAssistant.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AIConfig.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Register.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Dashboard.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ english/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ExpressionLearning.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LearningProgress.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Vocabulary.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ jobs/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JobList.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ JobDetail.vue
â”‚   â”‚   â”‚   â””â”€â”€ todos/
â”‚   â”‚   â”‚       â”œâ”€â”€ TodoList.vue
â”‚   â”‚   â”‚       â””â”€â”€ TodoDetail.vue
â”‚   â”‚   â”œâ”€â”€ App.vue                   # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts                   # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/                        # å‰ç«¯æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ e2e/                      # E2E æµ‹è¯•
â”‚   â”‚   â”‚   â”œâ”€â”€ idiomatic-expressions.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ integration/              # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ selenium/                 # Selenium æµ‹è¯•
â”‚   â”‚   â””â”€â”€ unit/                     # å•å…ƒæµ‹è¯•
â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ stores/
â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”œâ”€â”€ ci-reports/                   # CI æŠ¥å‘Š
â”‚   â”œâ”€â”€ playwright-report/            # Playwright æµ‹è¯•æŠ¥å‘Š
â”‚   â”œâ”€â”€ package.json                  # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ vite.config.js                # Vite æ„å»ºé…ç½®
â”‚   â”œâ”€â”€ vitest.config.ts              # Vitest æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ playwright.config.ts          # Playwright é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”‚   â””â”€â”€ tailwind.config.js            # Tailwind CSS é…ç½®
â”œâ”€â”€ htmlcov/                          # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
â”œâ”€â”€ issues/                           # é—®é¢˜è·Ÿè¸ª
â”œâ”€â”€ k8s/                              # Kubernetes éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ deployments/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ configmaps/
â”‚   â””â”€â”€ ingress/
â”œâ”€â”€ mysql/                            # MySQL é…ç½®å’Œåˆå§‹åŒ–
â”‚   â”œâ”€â”€ init/
â”‚   â””â”€â”€ conf/
â”œâ”€â”€ nginx/                            # Nginx é…ç½®
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ ssl/
â”œâ”€â”€ scripts/                          # éƒ¨ç½²å’Œç»´æŠ¤è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â”œâ”€â”€ backup.sh
â”‚   â””â”€â”€ migrate.sh
â”œâ”€â”€ tests/                            # é¡¹ç›®çº§æµ‹è¯•
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ performance/
â”œâ”€â”€ .cursorrules                      # Cursor è§„åˆ™é…ç½®
â”œâ”€â”€ .cz.json                          # Commitizen é…ç½®
â”œâ”€â”€ .env                              # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.example                      # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .flake8                           # Flake8 é…ç½®
â”œâ”€â”€ .gitignore                        # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .pre-commit-config.yaml           # Pre-commit é’©å­é…ç½®
â”œâ”€â”€ .releaserc.json                   # è¯­ä¹‰åŒ–ç‰ˆæœ¬å‘å¸ƒé…ç½®
â”œâ”€â”€ docker-compose.yml                # Docker Compose é…ç½®
â”œâ”€â”€ package.json                      # é¡¹ç›®æ ¹ä¾èµ–
â”œâ”€â”€ pyproject.toml                    # Python é¡¹ç›®é…ç½®
â””â”€â”€ README.md                         # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. å‰ç«¯æ¶æ„ (frontend/)
- **æŠ€æœ¯æ ˆ**: Vue 3 + TypeScript + Vite + Element Plus + Pinia
- **ç»„ä»¶åŒ–**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ç»„ä»¶ (ai/, english/, jobs/, todos/)
- **çŠ¶æ€ç®¡ç†**: Pinia stores ç®¡ç†å…¨å±€çŠ¶æ€
- **è·¯ç”±ç®¡ç†**: Vue Router å®ç° SPA è·¯ç”±
- **æµ‹è¯•ä½“ç³»**: Vitest (å•å…ƒ) + Playwright (E2E) + Selenium (é›†æˆ)
- **æ„å»ºå·¥å…·**: Vite æä¾›å¿«é€Ÿå¼€å‘å’Œæ„å»º

### 2. åç«¯æ¶æ„ (backend/)
- **æŠ€æœ¯æ ˆ**: Django + Django REST Framework + Celery + Redis
- **åº”ç”¨æ¨¡å—**: æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ† (ai/, english/, jobs/, users/ ç­‰)
- **AI æœåŠ¡**: å®Œæ•´çš„ AI æœåŠ¡ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«è´Ÿè½½å‡è¡¡ã€å¥åº·ç›‘æ§ã€æ•…éšœè½¬ç§»
- **æ•°æ®åº“**: MySQL ä¸»æ•°æ®åº“ + Redis ç¼“å­˜
- **å¼‚æ­¥ä»»åŠ¡**: Celery å¤„ç†åå°ä»»åŠ¡
- **API è®¾è®¡**: RESTful API + WebSocket å®æ—¶é€šä¿¡

### 3. AI ç®¡é“ (ai_pipeline/)
- **æ¨¡å‹ç®¡ç†**: AI æ¨¡å‹çš„åŠ è½½ã€é…ç½®å’Œç‰ˆæœ¬ç®¡ç†
- **æ•°æ®å¤„ç†**: è¾“å…¥é¢„å¤„ç†å’Œè¾“å‡ºåå¤„ç†
- **æœåŠ¡é›†æˆ**: ä¸åç«¯ AI æœåŠ¡æ¨¡å—é›†æˆ

### 4. éƒ¨ç½²ä¸è¿ç»´
- **å®¹å™¨åŒ–**: Docker + Docker Compose æœ¬åœ°å¼€å‘
- **ç¼–æ’**: Kubernetes ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- **CI/CD**: GitHub Actions è‡ªåŠ¨åŒ–æµæ°´çº¿
- **ç›‘æ§**: é›†æˆç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- **è´Ÿè½½å‡è¡¡**: Nginx åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡

### 5. å¼€å‘å·¥å…·é“¾
- **ä»£ç è´¨é‡**: ESLint, Prettier, Black, isort, flake8
- **æµ‹è¯•è¦†ç›–**: å‰åç«¯å®Œæ•´æµ‹è¯•è¦†ç›–
- **ç‰ˆæœ¬æ§åˆ¶**: Git + è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†
- **é¡¹ç›®ç®¡ç†**: TaskMaster AI æ™ºèƒ½é¡¹ç›®ç®¡ç†
- **IDE é›†æˆ**: Cursor IDE æ·±åº¦é›†æˆ

## åŠŸèƒ½æ¨¡å—è¯´æ˜

### è‹±è¯­å­¦ä¹ æ¨¡å— (english/)
- ä¹ è¯­è¡¨è¾¾å¼å­¦ä¹ å’Œç»ƒä¹ 
- å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œç»Ÿè®¡
- ä¸ªæ€§åŒ–å­¦ä¹ æ¨è
- å‘éŸ³ç»ƒä¹ å’Œè¯„ä¼°

### AI åŠ©æ‰‹æ¨¡å— (ai/)
- å¤šæ¨¡å‹æ”¯æŒå’Œæ™ºèƒ½åˆ‡æ¢
- å®æ—¶å¯¹è¯å’Œä¸Šä¸‹æ–‡ç®¡ç†
- æˆæœ¬ç›‘æ§å’Œä½¿ç”¨ç»Ÿè®¡
- æœåŠ¡å¥åº·ç›‘æ§å’Œæ•…éšœæ¢å¤

### æ±‚èŒç®¡ç†æ¨¡å— (jobs/)
- èŒä½ä¿¡æ¯ç®¡ç†
- ç®€å†å’Œæ±‚èŒè¿›åº¦è·Ÿè¸ª
- é¢è¯•å®‰æ’å’Œè®°å½•

### å¾…åŠäº‹é¡¹æ¨¡å— (todos/)
- ä»»åŠ¡åˆ›å»ºå’Œç®¡ç†
- ä¼˜å…ˆçº§å’Œæˆªæ­¢æ—¥æœŸ
- è¿›åº¦è·Ÿè¸ªå’Œæé†’

### ç”¨æˆ·ä¸æƒé™æ¨¡å— (users/, rbac/)
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- è§’è‰²å’Œæƒé™ç®¡ç†
- ç”¨æˆ·é…ç½®å’Œåå¥½è®¾ç½®

## æŠ€æœ¯ç‰¹è‰²

1. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: é‡‡ç”¨æœ€æ–°çš„å‰åç«¯æŠ€æœ¯
2. **å¾®æœåŠ¡æ¶æ„**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
3. **AI æ·±åº¦é›†æˆ**: å®Œæ•´çš„ AI æœåŠ¡ç®¡ç†å’Œç›‘æ§ä½“ç³»
4. **å®Œæ•´æµ‹è¯•è¦†ç›–**: å•å…ƒã€é›†æˆã€E2E å…¨æ–¹ä½æµ‹è¯•
5. **è‡ªåŠ¨åŒ–éƒ¨ç½²**: CI/CD æµæ°´çº¿å’Œå®¹å™¨åŒ–éƒ¨ç½²
6. **æ™ºèƒ½é¡¹ç›®ç®¡ç†**: TaskMaster AI è¾…åŠ©å¼€å‘æµç¨‹
7. **å›½é™…åŒ–æ”¯æŒ**: å¤šè¯­è¨€ç•Œé¢å’Œå†…å®¹
8. **æ€§èƒ½ä¼˜åŒ–**: ç¼“å­˜ç­–ç•¥ã€æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²
9. **å®‰å…¨ä¿éšœ**: è®¤è¯æˆæƒã€æ•°æ®åŠ å¯†ã€å®‰å…¨å®¡è®¡
10. **ç›‘æ§è¿ç»´**: å®Œæ•´çš„ç›‘æ§ã€æ—¥å¿—å’Œå‘Šè­¦ä½“ç³»

## å¼€å‘ç¯å¢ƒæ­å»º

1. **å‰ç«¯å¼€å‘**:
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

2. **åç«¯å¼€å‘**:
   ```bash
   cd backend
   pip install -r requirements.txt
   python manage.py runserver
   ```

3. **å®Œæ•´ç¯å¢ƒ**:
   ```bash
   docker-compose up -d
   ```

## æµ‹è¯•è¿è¡Œ

1. **å‰ç«¯æµ‹è¯•**:
   ```bash
   npm run test:unit    # å•å…ƒæµ‹è¯•
   npm run test:e2e     # E2E æµ‹è¯•
   ```

2. **åç«¯æµ‹è¯•**:
   ```bash
   pytest               # å•å…ƒæµ‹è¯•
   python manage.py test # Django æµ‹è¯•
   ```

è¿™ä¸ªé¡¹ç›®å±•ç°äº†ç°ä»£ Web åº”ç”¨å¼€å‘çš„æœ€ä½³å®è·µï¼Œé›†æˆäº† AI æŠ€æœ¯ã€å®Œæ•´çš„æµ‹è¯•ä½“ç³»ã€è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œæ™ºèƒ½é¡¹ç›®ç®¡ç†ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æŠ€æœ¯å…ˆè¿›çš„ä¼ä¸šçº§åº”ç”¨å¹³å°ã€‚
````





## é¡¹ç›®è®¾è®¡æ–¹å‘

- [ ] é¦–å…ˆä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

- [ ] è®¾è®¡é¡¹ç›®æ¡†æ¶ï¼Œæ ‡å®šé‡è¦æ–‡ä»¶GUIDEã€READEMEã€FAQç­‰ç­‰

- [ ] ä½¿ç”¨Figma MCPå·¥å…·è®¾è®¡å‰ç«¯ç•Œé¢

- [ ] å®Œå–„äº§å“æ–‡æ¡£å¹¶ä¸”æŒ‰ç…§æ¨¡å—ä¿å­˜ï¼Œå¼€å‘å“ªä¸ªæ¨¡å—ï¼Œå“ªä¸ªåŠŸèƒ½å°±å®Œå–„å“ªä¸ªäº§å“æ–‡æ¡£

- [ ] å®Œå–„é¡¹ç›®çš„ä»£ç å‡½æ•°ã€å˜é‡ã€ä»£ç æ–‡ä»¶ï¼Œæ•°æ®åº“è¡¨ã€å­—æ®µç­‰ç­‰çš„å‘½åè§„åˆ™ï¼Œå°é©¼å³°ã€å¤§é©¼å³°å‘½åã€‚

- [ ] ä½¿ç”¨task masterã€figmaã€pytest-mcp-serverã€playwrightç­‰ç­‰MCPå·¥å…·

  

  

### æ‰€ä½¿ç”¨åº“ã€ä¾èµ–è‡ªåŠ¨æ›´æ–°åˆ°requirements.txtã€package.jsonï¼Œå¼€å‘ç¯å¢ƒä¸€é”®å®‰è£…

- `pip install` åªä¼šæŠŠåŒ…è£…è¿›**å½“å‰ç¯å¢ƒ**ï¼›
  æƒ³è®© `requirements.txt` åŒæ­¥ï¼Œå¿…é¡»å†æ‰§è¡Œ `pip freeze > requirements.txt`ï¼ˆæˆ–æ‰‹å·¥ç¼–è¾‘ã€ç”¨ pip-toolsï¼‰ã€‚

- **å›¢é˜Ÿè§„èŒƒ**ï¼šä¸€å¾‹ç”¨ `npm install åŒ…å` / `npm uninstall åŒ…å`ï¼Œç¦æ­¢æ‰‹åŠ¨æ”¹ `node_modules`ã€‚
- **æäº¤ä»£ç å‰**æ‰«ä¸€çœ¼ `git diff package.json package-lock.json`ï¼Œç¡®è®¤ä¾èµ–å˜æ›´ç¬¦åˆé¢„æœŸã€‚

### Git commit å¤‡æ³¨æœ€ä½³å®è·µ

**"ä¸€è¡Œæ‘˜è¦ + ç©ºè¡Œ + è¯¦è¿°ï¼ˆå¯é€‰ï¼‰ + å…ƒæ•°æ®ï¼ˆå¯é€‰ï¼‰"**ï¼Œç”¨çº¦å®šå¼æäº¤ï¼ˆConventional Commitsï¼‰+ 50/72 æ¢è¡Œè§„åˆ™ï¼ŒCI èƒ½è‡ªåŠ¨å‘ç‰ˆã€Changelog è‡ªåŠ¨ç”Ÿæˆã€‚

#### æ¨¡æ¿ç»“æ„

```text
<type>(<scope>): <subject>          â† 50 å­—ç¬¦å†…ï¼Œä¸­è‹±æ–‡å‡å¯

<body>                              â† 72 å­—ç¬¦è‡ªåŠ¨æ¢è¡Œï¼Œè§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œä¸æ˜¯"æ€ä¹ˆåš"

<footer>                            â† å…³è” Issueã€PRã€Breaking Change
```

#### ç±»å‹è¯´æ˜ï¼ˆAngular æ ‡å‡†ï¼‰

| ç±»å‹     | è¯´æ˜                             |
| :------- | :------------------------------- |
| feat     | æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰                |
| fix      | ä¿®å¤ Bug                         |
| docs     | ä»…æ–‡æ¡£å˜æ›´                       |
| style    | ä»£ç æ ¼å¼ã€ç¼ºå°‘åˆ†å·ç­‰æ— åŠŸèƒ½å˜åŒ–   |
| refactor | ä»£ç é‡æ„ï¼Œæ—¢ä¸æ˜¯ fix ä¹Ÿä¸æ˜¯ feat |
| perf     | æ€§èƒ½ä¼˜åŒ–                         |
| test     | æµ‹è¯•ç›¸å…³ï¼ˆå•å…ƒã€E2Eã€é‡æ„æµ‹è¯•ï¼‰  |
| build    | æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–å˜åŠ¨           |
| ci       | CI/CD è„šæœ¬ã€é…ç½®å˜åŠ¨             |
| chore    | æ‚é¡¹ï¼ˆå‡çº§ä¾èµ–ã€æ”¹ Makefile ç­‰ï¼‰ |
| revert   | å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬                 |

------

#### ç¤ºä¾‹ 1ï¼ˆåç«¯ï¼‰

```text
feat(users): æ·»åŠ æ‰‹æœºå·éªŒè¯ç ç™»å½•

- æ–°å¢ SMSClient å°è£…é˜¿é‡Œäº‘çŸ­ä¿¡
- éªŒè¯ç  5 åˆ†é’Ÿå†…æœ‰æ•ˆï¼Œ3 æ¬¡é”™è¯¯é”å®š 1 å°æ—¶
- æ”¯æŒæµ‹è¯•ç¯å¢ƒ mock å¼€å…³

Closes #123
```

#### ç¤ºä¾‹ 2ï¼ˆå‰ç«¯ï¼‰

```text
fix(english): ä¿®å¤è¯æ±‡å¡ç‰‡ç¿»è½¬åŠ¨ç”»å¡é¡¿

ä½¿ç”¨ transform-gpu ä»£æ›¿ left/topï¼Œå‡å°‘é‡æ’

BREAKING CHANGE: ç§»é™¤ --card-flip-left å˜é‡ï¼Œä¸»é¢˜åŒ…éœ€åŒæ­¥æ›´æ–°

See #456
```

#### ç¤ºä¾‹ 3ï¼ˆæ‚é¡¹ï¼‰

```text
chore(deps): å‡çº§ Django 4.2 â†’ 5.0

- å®˜æ–¹ LTS æ”¯æŒè‡³ 2028
- ç§»é™¤å·²å¼ƒç”¨ url() å†™æ³•

Refs: https://docs.djangoproject.com/en/5.0/releases/5.0/
```

------

#### 7 æ¡é»„é‡‘è§„åˆ™

1. é¦–å­—æ¯å°å†™ã€å¥æœ«æ— å¥å·
2. æ‘˜è¦ â‰¤ 50 å­—ç¬¦ï¼›Body â‰¤ 72 å­—ç¬¦è‡ªåŠ¨æ¢è¡Œ
3. ç”¨ç°åœ¨æ—¶æ€ï¼š"æ·»åŠ "è€Œé"æ·»åŠ äº†"
4. é¦–è¡Œå†™"åšäº†ä»€ä¹ˆ"ï¼ŒBody å†™"ä¸ºä»€ä¹ˆåš"
5. å…³è” Issueï¼š`Closes #123` æˆ– `Fixes #456`
6. Breaking Change å¿…é¡»ä»¥ `BREAKING CHANGE:` å¼€å¤´
7. æäº¤å‰ç”¨ `git commit -v` æŸ¥çœ‹ diffï¼Œç¡®ä¿æ— è°ƒè¯•ä»£ç 

------

#### è‡ªåŠ¨åŒ–æ”¶ç›Š

- CI è¯†åˆ« `feat`/`fix` è‡ªåŠ¨æ‰“ Tag å‘ç‰ˆï¼ˆsemantic-releaseï¼‰
- è‡ªåŠ¨ç”Ÿæˆ CHANGELOG.md
- IDE / Git GUI é¦–è¡Œæˆªæ–­æ˜¾ç¤ºï¼Œ50 å­—ç¬¦å†…æœ€ç¾è§‚

------

#### æ‡’äººå·¥å…·

```bash
# å…¨å±€å®‰è£… commitizen â†’ äº¤äº’å¼å¡«å†™
npm i -g commitizen cz-conventional-changelog
echo '{ "path": "cz-conventional-changelog" }' > ~/.czrc
# ä½¿ç”¨
git cz
```

### ä½¿ç”¨task masterç”Ÿæˆä»»åŠ¡æ—¶ï¼Œäº§å“æ–‡æ¡£å­˜æ”¾ä»¥åŠä»»åŠ¡æ–‡ä»¶å­˜æ”¾åˆ†å±‚ï¼Œåˆ†ç›®å½•ï¼Œå‘½åè§„åˆ™ç»Ÿä¸€



### æµ‹è¯•ä½“ç³»å»ºè®¾

#### æµ‹è¯•ç›®å½•æ¶æ„è®¾è®¡

1. å‰ç«¯ã€Œå°±è¿‘åŸåˆ™ã€+åç«¯ã€Œå°±è¿‘åŸåˆ™ã€
2. ç»Ÿä¸€æ”¶å£åˆ° `tests/` æ ¹ç›®å½•åšåˆ†å±‚æ±‡æ€»ï¼ˆCI æŠ¥å‘Šã€æ€§èƒ½ã€è·¨ç«¯ E2Eï¼‰
3. æ–‡ä»¶çº§æ¸…å•ï¼šæ¯ä¸ªç›®å½•è¯¥æ”¾ä»€ä¹ˆæµ‹è¯•æ–‡ä»¶â†’ç›´æ¥ç…§æŠ„å³å¯

```python
Bravo/                          # é¡¹ç›®æ ¹
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ apps/
â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚       â”œâ”€â”€ models.py
â”‚   â”‚       â”œâ”€â”€ views.py
â”‚   â”‚       â”œâ”€â”€ tests/            # åç«¯ï¼šDjango å°±è¿‘å•å…ƒæµ‹è¯•
â”‚   â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚       â”‚   â”œâ”€â”€ test_models.py
â”‚   â”‚       â”‚   â”œâ”€â”€ test_views.py
â”‚   â”‚       â”‚   â””â”€â”€ test_integration.py
â”‚   â”œâ”€â”€ tests/                    # åç«¯ï¼šé¡¶å±‚æ±‡æ€»ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ integration/          # è·¨ app é›†æˆ
â”‚   â”‚   â”‚   â””â”€â”€ test_user_flow.py
â”‚   â”‚   â”œâ”€â”€ performance/          # Locust/k6
â”‚   â”‚   â”‚   â””â”€â”€ locustfile.py
â”‚   â”‚   â””â”€â”€ factories/            # Factory Boy å…±äº«
â”‚   â”‚       â””â”€â”€ user_factory.py
â”‚   â””â”€â”€ pytest.ini
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseButton.vue
â”‚   â”‚   â”‚   â””â”€â”€ BaseButton.spec.ts  # å‰ç«¯ï¼šå°±è¿‘å•å…ƒ
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.spec.ts       # å‰ç«¯ï¼šå°±è¿‘é›†æˆ
â”‚   â”‚   â”‚   â””â”€â”€ Login.e2e.ts        # å‰ç«¯ï¼šå°±è¿‘ E2E
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ format.ts
â”‚   â”‚       â””â”€â”€ format.spec.ts
â”‚   â””â”€â”€ tests/                      # å‰ç«¯ï¼šé¡¶å±‚æ±‡æ€»
â”‚       â”œâ”€â”€ unit/
â”‚       â”‚   â””â”€â”€ setup.ts
â”‚       â”œâ”€â”€ e2e/
â”‚       â”‚   â”œâ”€â”€ playwright.config.ts
â”‚       â”‚   â””â”€â”€ flows/
â”‚       â”‚       â””â”€â”€ auth.flow.e2e.ts
â”‚       â””â”€â”€ coverage/
â”‚           â””â”€â”€ vitest.config.ts
â””â”€â”€ tests/                          # é¡¹ç›®çº§æ±‡æ€»ï¼ˆå‰åç«¯ä¸€èµ·è·‘ï¼‰
    â”œâ”€â”€ integration/               # è·¨ç«¯ API â†” UI é›†æˆ
    â”‚   â””â”€â”€ test_user_end_to_end.py
    â”œâ”€â”€ system/                    # å…¨é“¾è·¯å†’çƒŸ
    â”‚   â””â”€â”€ test_smoke.py
    â””â”€â”€ reports/                   # ç»Ÿä¸€è¦†ç›–ç‡/Allure
        â”œâ”€â”€ .gitignore
        â””â”€â”€ README.md
```

åç«¯ï¼ˆDjango å°±è¿‘ï¼‰

```
apps/<module>/tests/
â”œâ”€â”€ test_models.py      # Model æ–¹æ³•/ä¿¡å·
â”œâ”€â”€ test_views.py       # è§†å›¾/åºåˆ—åŒ–å™¨/æƒé™
â”œâ”€â”€ test_integration.py # åŒ app å¤šæ¨¡å‹è”è°ƒ
```

åç«¯ï¼ˆé¡¶å±‚æ±‡æ€»ï¼‰

```
backend/tests/
â”œâ”€â”€ integration/        # è·¨ app è°ƒç”¨ï¼ˆCeleryã€å¤–éƒ¨ APIï¼‰
â”œâ”€â”€ performance/        # Locust/K6 è„šæœ¬
â””â”€â”€ factories/          # Factory Boy å…±äº«æ„é€ å™¨
```

å‰ç«¯ï¼ˆå°±è¿‘ï¼‰

```
src/xxx/xxx.vue
src/xxx/xxx.spec.ts     # Vitest ç»„ä»¶/è§†å›¾
src/xxx/xxx.e2e.ts      # Playwright å•é¡µ E2E
```

å‰ç«¯ï¼ˆé¡¶å±‚æ±‡æ€»ï¼‰

```
frontend/tests/
â”œâ”€â”€ unit/setup.ts        # å…¨å±€ mockã€æ’ä»¶
â”œâ”€â”€ e2e/playwright.config.ts
â””â”€â”€ coverage/vitest.config.ts
```

é¡¹ç›®çº§æ±‡æ€»ï¼ˆå‰åç«¯ä¸€èµ·è·‘ CIï¼‰

```
tests/
â”œâ”€â”€ integration/         # è°ƒåç«¯ API + å‰ç«¯é¡µé¢è”åˆæ–­è¨€
â”œâ”€â”€ system/              # å†’çƒŸï¼ˆå¥åº·æ£€æŸ¥ã€ç™»å½•â†’ä¸‹å•â†’æ”¯ä»˜ï¼‰
â””â”€â”€ reports/             # ç»Ÿä¸€ Allure/è¦†ç›–ç‡å…¥å£
```

------

CI ä¸€é”®å…¨è·‘ï¼ˆGitHub Actions ç‰‡æ®µï¼‰

yaml

```yaml
- name: Backend tests
  run: |
    docker compose exec -T backend pytest backend/tests apps/*/tests --cov --cov-report=xml:tests/reports/backend-cov.xml

- name: Frontend tests
  run: |
    cd frontend && npm run test:ci -- --coverage.reporter=xml --coverage.reporter.dst=../tests/reports/frontend-cov.xml

- name: Merge coverage
  run: |
    python -m pip install coverage
    coverage combine tests/reports/*-cov.xml
    coverage xml -o tests/reports/full-coverage.xml
```

------

ä¸€å¥è¯æ€»ç»“
**ã€Œå‰åç«¯å„è‡ªå°±è¿‘å†™æµ‹è¯•ï¼Œé¡¶å±‚ tests/ åªåšæ±‡æ€»å’Œè·¨ç«¯åœºæ™¯ã€**ï¼Œæ—¢ä¿ç•™å‰ç«¯/åç«¯ç›®å½•çš„ã€Œé¢œå€¼ã€ï¼Œåˆæ»¡è¶³ CI ç»Ÿä¸€æŠ¥å‘Šéœ€æ±‚â€”â€”ç›´æ¥æŠ„ï¼





#### CIæ˜¯å¦å¯ä»¥å¼ºåˆ¶æ£€éªŒï¼Œæ–‡æ¡£æ˜¯å¦æœ‰ä¹±æ”¾ï¼Œä¹±ç”ŸæˆæŒ‡å®šæ–‡æ¡£ä¹‹å¤–çš„æ–‡æ¡£ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥è‡ªç”±å®šåˆ¶å…¶ä»–çš„æ£€éªŒè§„åˆ™ã€‚

#### å…ˆæ­å»ºåŸºç¡€æ¡†æ¶ï¼Œæ¯”å¦‚CICDã€æµ‹è¯•æ¡†æ¶ã€æ—¥å¿—æ‰“å°è®¾è®¡ã€‚

#### makeç»Ÿä¸€æµ‹è¯•å…¥å£ï¼Œæµ‹è¯•æ–‡ä»¶è‡ªåŠ¨è¯†åˆ«å¹¶çº³å…¥

#### pre-commité’©å­ï¼Œpushå‰è‡ªåŠ¨è·‘å…¨é‡æµ‹è¯•

```
# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: ai-test-gate
        name: AI Test Gate
        entry: cursor mcp pytest-gate --fail-under=80
        language: system
        pass_filenames: false
```

#### å®Œå–„æµ‹è¯•é—¨ç¦è®¾è®¡ï¼Œä»£ç è¦†ç›–ç‡ã€å¤æ‚åº¦ï¼Œç­‰ç­‰ï¼Œåˆ©ç”¨ç°æœ‰åº“æˆ–å·¥å…·æ¯”å¦‚radonã€coverageã€pytestã€pylintã€playwrightã€seleniumã€Lighthouseã€Codecovã€GitHub Checks ç­‰ç­‰ï¼Œæ¢ç´¢éœ€è¦ä½¿ç”¨çš„æµ‹è¯•åº“ä»¥åŠå·¥å…·

#### ç”¨ GitHub Actions + Vercel + Slack å»ºç«‹â€œè‡ªåŠ¨éƒ¨ç½²+å›æ»šâ€

- **éƒ¨ç½²å‰å¿…é¡»æ‰€æœ‰æµ‹è¯•é€šè¿‡**
- **éƒ¨ç½²å¤±è´¥è‡ªåŠ¨å›æ»š**
- **ä½ åªåœ¨ Slack æ”¶åˆ°â€œæˆåŠŸ/å¤±è´¥â€é€šçŸ¥**

#### æµ‹è¯•å·¥å‚é…ç½®ï¼Œ**ç”¨æ•°æ®ä»£æ›¿ä»£ç ã€ç”¨ç”Ÿæˆä»£æ›¿æ‰‹å†™ã€ç”¨é…ç½®ä»£æ›¿å¤åˆ¶ç²˜è´´**

#### é˜²æ­¢**Cursor ä¸ºäº†â€œè®©æµ‹è¯•é€šè¿‡â€è€Œå·å·æ”¹æµ‹è¯•ï¼ˆæˆ–æ–­è¨€ï¼‰ï¼Œè€Œä¸æ˜¯ä¿®ä¸šåŠ¡é€»è¾‘**

- **æµ‹è¯•ç”¨ä¾‹åŒä»“åº“ï¼ˆTest-Monorepoï¼‰**

```
repo/
â”œâ”€ src/             # ä¸šåŠ¡ä»£ç ï¼ˆCursor å¯å†™ï¼‰
â”œâ”€ tests/           # ç”Ÿæˆå±‚ï¼šCursor å¯å†™
â””â”€ tests-golden/    # æ‰‹å†™å±‚ï¼šåªè¯»ï¼ŒCursor ç¦æ­¢å†™
```

- **tests-golden/** ç”¨ Git LFS æˆ–å•ç‹¬ç§æœ‰ä»“åº“æ‰˜ç®¡ï¼Œ**å¼ºåˆ¶åªè¯»**
  åœ¨ CI é‡ŒåŠ é’©å­ï¼š

```bash
# .github/workflows/guard-golden-tests.yml
- name: Fail if golden tests are touched
  run: |
    if git diff --name-only origin/main...HEAD | grep -q '^tests-golden/'; then
      echo "âŒ ç¦æ­¢ä¿®æ”¹é»„é‡‘æµ‹è¯•ï¼"
      exit 1
    fi
```

- **â€œé»„é‡‘æµ‹è¯•â€ç”±ä½ äº²è‡ª Review æ‰èƒ½åˆå¹¶**

æ‰€æœ‰æ”¹åŠ¨ `tests-golden/` çš„ PR **å¿…é¡»äººå·¥ Approve**

GitHub è®¾ç½®è§„åˆ™ï¼š
`Settings â†’ Branches â†’ Require pull request reviews before merging`
å¹¶æŒ‡å®š Code Ownerï¼š

```
/tests-golden/    @your-username
```

- **Cursor çš„æç¤ºè¯é‡ŒåŠ â€œæµ‹è¯•é”â€**

åœ¨æ¯æ¬¡ç”Ÿæˆä»£ç å‰ï¼ŒæŠŠä¸‹é¢ç³»ç»Ÿæç¤ºè¯å–‚ç»™ Cursorï¼š

```
ã€æµ‹è¯•å®‰å…¨é”ã€‘
1. ä½ ç»å¯¹ç¦æ­¢ä¿®æ”¹ tests-golden/ ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶ã€‚
2. å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåªèƒ½ä¿®æ”¹ src/ é‡Œçš„ä¸šåŠ¡é€»è¾‘æˆ– tests/ é‡Œçš„è¾…åŠ©ä»£ç ã€‚
3. å¦‚æœä½ è®¤ä¸ºæµ‹è¯•ç”¨ä¾‹æœ¬èº«æœ‰è¯¯ï¼Œè¯·è¾“å‡ºâ€œTEST_CASE_ISSUE: <æè¿°>â€å¹¶åœæ­¢ç”Ÿæˆï¼Œç­‰å¾…äººç±»ç¡®è®¤ã€‚
```

- **æµ‹è¯•å¿«ç…§ï¼ˆSnapshotï¼‰+ Diff æŠ¥è­¦**

å¯¹å…³é”®æ–­è¨€ä½¿ç”¨ Jest snapshot / Playwright screenshot snapshot

åœ¨ CI é‡Œè·‘ï¼š

```bash
npx jest --ci --updateSnapshot
git diff --exit-code tests-golden/  # æœ‰å·®å¼‚å°±å¤±è´¥
```

#### é˜²æ­¢cursor**å¯èƒ½åªæ˜¯â€œæŒ‘å¥½è¿‡çš„æµ‹è¯•è·‘ä¸€éâ€ï¼Œç”šè‡³â€œå‡è£…è·‘â€ï¼Œç„¶åå‘Šè¯‰ä½ â€œå…¨é€šè¿‡â€**ã€‚

- **å¼ºåˆ¶å…¨é‡æµ‹è¯• + å…¬å¼€æ—¥å¿—**

```yaml
# .github/workflows/gate.yml
- name: Run ALL tests with trace
  run: |
    npx jest --ci --coverage --reporters=default --reporters=jest-junit
    npx playwright test --reporter=html
    npx nyc report --reporter=text-lcov > coverage.lcov
```

æŠŠæŠ¥å‘Šä¸Šä¼ åˆ° **GitHub Actions Artifacts** ä¸ **Codecov**ï¼Œä½ ç‚¹ä¸€ä¸‹å°±èƒ½çœ‹åˆ°ï¼š
âœ… è·‘äº†å¤šå°‘ç”¨ä¾‹
âœ… å“ªäº›æ–‡ä»¶æ²¡è¦†ç›–
âœ… å¤±è´¥æˆªå›¾ / trace

- è¦†ç›–ç‡é˜ˆå€¼ + å¼ºåˆ¶é”

åœ¨ `jest.config.js` é‡ŒåŠ ç¡¬æ€§é˜ˆå€¼ï¼š

```
module.exports = {
  coverageThreshold: {
    global: {
      branches: 90,
      functions: 90,
      lines: 90,
      statements: 90,
    },
  },
};
```

CI é‡Œå¦‚æœä½äºé˜ˆå€¼ï¼Œç›´æ¥å¤±è´¥ â†’ Cursor æ— æ³•â€œè’™æ··è¿‡å…³â€ã€‚

- **æµ‹è¯•æ‰§è¡Œâ€œåŒé’¥åŒ™â€åˆ¶åº¦**

**é’¥åŒ™ A**ï¼šCursor åªèƒ½æŠŠä»£ç æ¨åˆ° `dev` åˆ†æ”¯

**é’¥åŒ™ B**ï¼šGitHub Actions åœ¨ `dev` â†’ `main` çš„ PR ä¸Š**å¼ºåˆ¶è·‘ä¸€æ¬¡å®Œæ•´æµ‹è¯•**

ä½ åœ¨ PR é¡µé¢ä¸€çœ¼å°±èƒ½çœ‹åˆ° âœ… / âŒ

æ²¡æœ‰ä½ çš„ Approveï¼Œæ— æ³•åˆå¹¶åˆ° `main`ï¼ˆéƒ¨ç½²ä¹Ÿè§¦å‘ä¸äº†ï¼‰

- å¯è§†åŒ–ç›‘æ§é¢æ¿ï¼ˆä½ ä¸€çœ¼å°±èƒ½çœ‹æ‡‚ï¼‰

| æŒ‡æ ‡         | å·¥å…·                   | é˜ˆå€¼    | ä¸è¾¾æ ‡ä¼šæ€æ · |
| ------------ | ---------------------- | ------- | ------------ |
| å•æµ‹é€šè¿‡ç‡   | GitHub Checks          | 100 %   | PR è¢«æ ‡ âŒ    |
| ç«¯åˆ°ç«¯é€šè¿‡ç‡ | Playwright HTML Report | 100 %   | PR è¢«æ ‡ âŒ    |
| ä»£ç è¦†ç›–ç‡   | Codecov                | â‰¥ 90 %  | PR è¢«æ ‡ âŒ    |
| æ€§èƒ½è¯„åˆ†     | Lighthouse CI          | â‰¥ 90 åˆ† | PR è¢«æ ‡ âŒ    |

- #### åŠŸèƒ½æ¸…å• â†’ ç»“æ„åŒ– JSONï¼ˆä½ å†™ä¸€æ¬¡å³å¯ï¼‰

  `features.json`ï¼ˆæ”¾åœ¨ä»“åº“æ ¹ç›®å½•ï¼Œåªè¯»ï¼‰

```
[
  { "id": "ENG-001", "desc": "è‹±è¯­æ–°é—»åˆ—è¡¨é¡µæ˜¾ç¤ºæ ‡é¢˜å’Œæ‘˜è¦" },
  { "id": "ENG-002", "desc": "è‹±è¯­æ–°é—»è¯¦æƒ…é¡µç‚¹å‡»ç¿»è¯‘æŒ‰é’®å‡ºç°ä¸­æ–‡ç¿»è¯‘" },
  { "id": "ENG-003", "desc": "æ‰“å­—ç»ƒä¹ é¡µé¢ç»Ÿè®¡æ­£ç¡®ç‡" },
  { "id": "BLOG-001", "desc": "åšå®¢åˆ—è¡¨é¡µå±•ç¤º 3 ç¯‡æœ€æ–°åšå®¢" }
]
```

ä½ åªéœ€ç»´æŠ¤è¿™ä¸ªæ–‡ä»¶ï¼Œç”¨è‡ªç„¶è¯­è¨€æè¿°åŠŸèƒ½ç‚¹å³å¯ã€‚

- è®© Cursor è‡ªåŠ¨æŠŠâ€œæµ‹è¯• â†” åŠŸèƒ½â€é“¾æ¥èµ·æ¥
  åœ¨ jest.config.js é‡ŒåŠ ï¼š

```
module.exports = {
  testMatch: ["**/__tests__/**/*.test.js"],
  setupFilesAfterEnv: ["<rootDir>/matchFeatures.js"],
};
```

`matchFeatures.js`ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼ŒCursor æ¯æ¬¡å†™æµ‹è¯•æ—¶éƒ½è¦æŒ‰æ¨¡æ¿åŠ ä¸€è¡Œï¼‰

```
// åœ¨æ¯ä¸ªæµ‹è¯•æ–‡ä»¶é¡¶éƒ¨
const { linkTestToFeature } = require('./testMap');
linkTestToFeature('ENG-001');   // å‘Šè¯‰ç³»ç»Ÿè¿™æ¡æµ‹è¯•è¦†ç›– ENG-001
```

Cursor çš„**ç³»ç»Ÿæç¤ºè¯**é‡Œè¿½åŠ ï¼š

```
ã€åŠŸèƒ½-æµ‹è¯•æ˜ å°„é”ã€‘
1. å†™å®Œæµ‹è¯•åï¼Œå¿…é¡»åœ¨æ–‡ä»¶é¡¶éƒ¨è°ƒç”¨ linkTestToFeature('åŠŸèƒ½ID')ã€‚
2. ä¸å…è®¸æŠŠ linkTestToFeature æŒ‡å‘ä¸å­˜åœ¨çš„åŠŸèƒ½IDã€‚
3. CI ä¼šæ£€æŸ¥æ¯ä¸ªåŠŸèƒ½IDæ˜¯å¦è‡³å°‘è¢«ä¸€æ¡æµ‹è¯•æ˜ å°„ï¼›ç¼ºäº†å°±å¤±è´¥ã€‚
```

- #### CI è‡ªåŠ¨ç”Ÿæˆâ€œåŠŸèƒ½-æµ‹è¯•è¦†ç›–åœ°å›¾â€

.github/workflows/map.yml

```
- name: Build Feature-Test Map
  run: |
    node scripts/buildFeatureMap.js            # è¯»å– features.json + æ‰€æœ‰æµ‹è¯•æ–‡ä»¶
    cat feature-test-map.md >> $GITHUB_STEP_SUMMARY  # åœ¨ PR é¡µé¢ç›´æ¥æ˜¾ç¤º
```

ç”Ÿæˆçš„ `feature-test-map.md`ï¼ˆç›´æ¥å‡ºç°åœ¨ PR åº•éƒ¨ï¼Œä½ ä¸€çœ¼å¯è¯»ï¼‰

| åŠŸèƒ½ID   | æè¿°                           | æµ‹è¯•æ–‡ä»¶           | çŠ¶æ€         |
| -------- | ------------------------------ | ------------------ | ------------ |
| ENG-001  | è‹±è¯­æ–°é—»åˆ—è¡¨é¡µæ˜¾ç¤ºæ ‡é¢˜å’Œæ‘˜è¦   | `newsList.test.js` | âœ…            |
| ENG-002  | è¯¦æƒ…é¡µç‚¹å‡»ç¿»è¯‘æŒ‰é’®å‡ºç°ä¸­æ–‡ç¿»è¯‘ | â€”                  | âŒ **æ— æµ‹è¯•** |
| ENG-003  | æ‰“å­—ç»ƒä¹ ç»Ÿè®¡æ­£ç¡®ç‡             | `typing.test.js`   | âœ…            |
| BLOG-001 | åšå®¢åˆ—è¡¨å±•ç¤º 3 ç¯‡æœ€æ–°åšå®¢      | â€”                  | âŒ **æ— æµ‹è¯•** |

#### éœ€æ±‚ä¸€æ”¹ï¼Œå¯¹åº”ä»£ç æ²¡åŒæ­¥åˆ ï¼Œå°±ä¼šå˜æˆâ€œåƒµå°¸ä»£ç â€â€”â€”åŠŸèƒ½å…¥å£æ²¡äº†ï¼Œæ–‡ä»¶è¿˜åœ¨ï¼›æµ‹è¯•è¿˜ç»¿ï¼Œå®é™…æ²¡äººè°ƒç”¨ã€‚é¡¹ç›®è¶Šæ¥è¶Šè‚¿ï¼Œåç»­ç»´æŠ¤ã€æ„å»ºã€éƒ¨ç½²ã€AI ç”Ÿæˆæ—¶é—´éƒ½ä¼šæ‹–æ…¢ã€‚

| æ­¥éª¤             | æœºåˆ¶                                   | å·¥å…·/è„šæœ¬                          | è§¦å‘æ—¶æœº          | è¾“å‡º                                     |
| ---------------- | -------------------------------------- | ---------------------------------- | ----------------- | ---------------------------------------- |
| 1 é™æ€å¼•ç”¨æ‰«æ   | æ‰¾å‡ºâ€œä»æœªè¢« import / require çš„æ–‡ä»¶â€   | `npx unimported`                   | CI æ¯ push è·‘ä¸€æ¬¡ | æœªå¼•ç”¨æ–‡ä»¶åˆ—è¡¨                           |
| 2 è¿è¡Œæ—¶è¦†ç›–ç‡   | è·‘ E2E + å•å…ƒæµ‹è¯•ï¼Œæ”¶é›†â€œé›¶å‘½ä¸­â€å‡½æ•°/è¡Œ | `nyc --reporter=html` + Playwright | CI è·‘ gate.yml    | `coverage/index.html` çº¢è‰²åŒºåŸŸ           |
| 3 è‡ªåŠ¨åŒ– PR æé†’ | åƒµå°¸æ–‡ä»¶ > 3 å¤©å°±è‡ªåŠ¨æ PR å»ºè®®åˆ é™¤    | GitHub Action `dead-code-pr.yml`   | nightly cron      | PR æ ‡é¢˜ï¼š`chore: remove dead code (bot)` |
| 4 äººå·¥ä¸€é”®åˆå¹¶   | ä½ åªçœ‹ diff â†’ Approve â†’ Bot è‡ªåŠ¨åˆå¹¶   | GitHub `auto-merge` è§„åˆ™           | ä½ ç‚¹æŒ‰é’®          | ä»“åº“ç˜¦èº«ï¼Œæ„å»ºæ—¶é—´ â†“                     |

- ç¤ºä¾‹ CI ç‰‡æ®µï¼ˆç›´æ¥å¤åˆ¶ï¼‰

  .github/workflows/dead-code.yml

```
name: Dead-Code-Scanner
on:
  schedule: [{ cron: '0 4 * * *' }]   # æ¯å¤©å‡Œæ™¨ 4 ç‚¹
jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci
      - run: npx unimported --json > unimported.json
      - run: node scripts/create-dead-code-pr.js   # è¯»å– json å¹¶æ PR
```

ä¸€å¥è¯æ€»ç»“
æŠŠâ€œåƒµå°¸ä»£ç æ£€æµ‹â€åšæˆå¤œé—´ä¿å®‰ï¼šæ¯å¤©è‡ªåŠ¨å·¡é€»ï¼Œå‘ç°å°±è´´æ¡ï¼Œç­‰ä½ ä¸€é”®æ¸…ç†ã€‚
âœ… ä»Šå¤©å°±èƒ½åšçš„ 2 åˆ†é’ŸåŠ¨ä½œ

1. npm i -D unimported
2. æŠŠä¸Šé¢çš„ dead-code.yml æ‰”è¿› .github/workflows
3. æ˜æ—©çœ‹ GitHub â†’ Pull requests é‡Œæ˜¯å¦å‡ºç°â€œchore: remove dead code (bot)â€

#### **è®©å‰ç«¯ã€åç«¯ã€E2E ä¸‰å¥—æµ‹è¯•å„è‡ªç‹¬ç«‹ï¼Œåˆèƒ½åœ¨ CI é‡Œä¸€é”®ä¸²èµ·æ¥ã€‚**

```
repo-root/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ apps/               # Django åº”ç”¨
â”‚   â””â”€â”€ tests/              # åç«¯å•å…ƒ/é›†æˆæµ‹è¯•
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ test_models.py
â”‚       â””â”€â”€ test_views.py
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ tests/              # å‰ç«¯å•å…ƒ/ç»„ä»¶æµ‹è¯•
â”‚       â”œâ”€â”€ unit/
â”‚       â””â”€â”€ __init__.py
â”œâ”€â”€ e2e/                    # ç«¯åˆ°ç«¯ï¼ˆPlaywrightï¼‰
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ blog.spec.js
â”‚   â””â”€â”€ playwright.config.js
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ backend.yml
â”‚       â”œâ”€â”€ frontend.yml
â”‚       â””â”€â”€ e2e.yml
```

| æµ‹è¯•ç»´åº¦ | ä»£ç è·¯å¾„               | å‘½ä»¤                    | CI æ–‡ä»¶        |
| -------- | ---------------------- | ----------------------- | -------------- |
| åç«¯å•å…ƒ | `backend/tests/`       | `python manage.py test` | `backend.yml`  |
| å‰ç«¯å•å…ƒ | `frontend/tests/unit/` | `npm run test:unit`     | `frontend.yml` |
| ç«¯åˆ°ç«¯   | `e2e/tests/`           | `playwright test`       | `e2e.yml`      |

#### å¦‚ä½•ç¡®ä¿cursorå¼€å‘çš„æ–°åŠŸèƒ½ä¸ä¼šå½±å“åˆ°å·²å®ç°åŠŸèƒ½

ä¸€å¥è¯ï¼šç”¨ã€Œå›å½’æµ‹è¯•é—¨ç¦ã€æŠŠå·²å®ç°åŠŸèƒ½é”æ­»â€”â€”ä»»ä½•æ–°æ”¹åŠ¨è·‘ä¸è¿‡è€æµ‹è¯•å°±è‡ªåŠ¨æ‹’æ”¶ï¼ŒCursor æƒ³ç ´åéƒ½éš¾ã€‚

- ç»™å·²æœ‰åŠŸèƒ½å»ºé»„é‡‘æµ‹è¯•ï¼ˆé”æ­»ï¼‰

```
# ç¤ºä¾‹ï¼šDjango
echo "class BlogTests(TestCase):
    def test_create_post(self):
        r = self.client.post('/api/posts/', {'title':'hi'})
        self.assertEqual(r.status_code, 201)
" > backend/tests/test_regression.py
```

- CI è®¾ç½®ã€Œå›å½’é—¨ç¦ã€
  .github/workflows/regression.yml

```
name: Regression Gate
on: [pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: docker compose up -d
      - run: pytest backend/tests/test_regression.py  # åªè·‘æ—§åŠŸèƒ½
```

**è‹¥å›å½’æµ‹è¯•å¤±è´¥ï¼ŒPR è‡ªåŠ¨ âŒï¼Œç¦æ­¢åˆå¹¶ã€‚**

- Cursor ç³»ç»Ÿæç¤ºè¯ï¼ˆé˜²æ‰‹æŠ–ï¼‰

ã€å›å½’é”ã€‘
1. ä»»ä½•æ–°åŠŸèƒ½å¿…é¡»è¿½åŠ åˆ° tests/ æ–°æ–‡ä»¶ï¼Œç¦æ­¢ä¿®æ”¹ test_regression.py  
2. å…ˆè·‘ `pytest test_regression.py` 100 % é€šè¿‡ï¼Œå†æäº¤ä»£ç   
3. å¦‚æµ‹è¯•å¤±è´¥ï¼Œä»…ä¿®ä¸šåŠ¡é€»è¾‘ï¼Œä¸æ”¹æµ‹è¯•

#### cursorå¯èƒ½æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰è®¾ç½®æµ‹è¯•ç”¨ä¾‹ï¼Œé¡¹ç›®å·²è¿›è¡Œä¸€åŠï¼Œå¦‚ä½•æŸ¥æ¼è¡¥ç¼º

| æ­¥éª¤                          | å·¥å…·/å‘½ä»¤                                       | è¾“å‡º                 | ä¸‹ä¸€æ­¥                                          |
| ----------------------------- | ----------------------------------------------- | -------------------- | ----------------------------------------------- |
| â‘  ä¸€é”®ç”Ÿæˆã€Œè¦†ç›–ç‡ç¼ºå£åœ°å›¾ã€  | `pytest --cov=backend --cov-report=html`        | `htmlcov/index.html` | æµè§ˆå™¨æ‰“å¼€ï¼Œçº¢è‰²åŒºåŸŸå°±æ˜¯ **0% è¦†ç›–çš„æ–‡ä»¶/å‡½æ•°** |
| â‘¡ è‡ªåŠ¨ç”Ÿæˆã€ŒåŠŸèƒ½-æµ‹è¯•å¯¹ç…§è¡¨ã€ | `python scripts/build_feature_map.py` â¬‡ï¸è„šæœ¬å·²ç»™ | `missing_tests.md`   | æ¯è¡Œå¯¹åº”ä¸€ä¸ª **æ— æµ‹è¯•çš„åŠŸèƒ½ç‚¹**                 |
| â‘¢ å¢é‡è¡¥æµ‹                    | è®© Cursor æŒ‰ missing\_tests.md é€æ¡è¡¥å•æµ‹       | `test_*.py` æ–°å¢æ–‡ä»¶ | å†è·‘ä¸€æ¬¡ â‘ ï¼Œç›´åˆ°çº¢è‰²å…¨ç­                        |

ä¸€é”®è„šæœ¬ï¼ˆç›´æ¥å¤åˆ¶åˆ° `scripts/build_feature_map.py`ï¼‰

```python
#!/usr/bin/env python3
import ast, os, re, json

FEATURES_FILE = 'features.json'
COVERAGE_FILE = '.coverage'

def list_functions(path):
    funcs = set()
    for root, _, files in os.walk(path):
        for f in files:
            if f.endswith('.py') and 'test_' not in f:
                try:
                    tree = ast.parse(open(os.path.join(root, f)).read())
                    for node in ast.walk(tree):
                        if isinstance(node, ast.FunctionDef):
                            funcs.add(f"{f}:{node.name}")
                except: pass
    return funcs

def list_tests():
    tests = set()
    for root, _, files in os.walk('backend/tests'):
        for f in files:
            if f.startswith('test_'):
                txt = open(os.path.join(root, f)).read()
                tests.update(re.findall(r'def\s+(test_\w+)', txt))
    return tests

if __name__ == '__main__':
    funcs = list_functions('backend')
    tests = list_tests()
    missing = sorted(funcs - {t.replace('test_', '') for t in tests})
    with open('missing_tests.md', 'w') as f:
        f.write('| æ–‡ä»¶:å‡½æ•° | åŸå›  |\n|---|---|\n')
        for m in missing:
            f.write(f'| `{m}` | æ— æµ‹è¯• |\n')
    print('ğŸ¯ missing_tests.md å·²ç”Ÿæˆï¼Œå…±', len(missing), 'å¤„ç¼ºå£')
```

- 2 å°æ—¶å®æ“æµç¨‹

1. **ç”Ÿæˆç¼ºå£**

   ```bash
   pytest --cov=backend --cov-report=html
   python scripts/build_feature_map.py
   ```

2. **æµè§ˆå™¨æ‰“å¼€** `htmlcov/index.html` + `missing_tests.md`ï¼Œçº¢è‰²å³ç›®æ ‡ã€‚

3. **Cursor è¡¥æµ‹**

   ```
   æ ¹æ® missing_tests.md ç¬¬ 1 è¡Œï¼Œä¸º backend/views.py:create_post å†™ pytest å•æµ‹
   ```

   é€è¡Œè¡¥å®Œï¼Œå†è·‘è¦†ç›–ç‡ï¼Œç›´åˆ°çº¢è‰²åŒºåŸŸ < 5 %ã€‚

#### æˆ‘åˆæ‹…å¿ƒcursorå¹¶æ²¡æœ‰å»ºç«‹å®Œå–„çš„æµ‹è¯•ä½“ç³»ï¼Œå¦‚ä½•éªŒè¯

ç”¨ã€Œä¸€é”®ä½“æ£€è„šæœ¬ã€+ã€Œéšæœºç ´åæµ‹è¯•ã€åŒé‡éªŒè¯ï¼Œ10 åˆ†é’Ÿå°±èƒ½ç¡®è®¤ Cursor åˆ°åº•æœ‰æ²¡æœ‰ç»™ä½ æ­å¥½å®Œæ•´çš„æµ‹è¯•ä½“ç³»ã€‚

éªŒè¯è„šæœ¬ï¼ˆå¤åˆ¶å³ç”¨ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `health_check.sh`ï¼š

```
#!/bin/bash
set -e
echo "====== 1  æµ‹è¯•æ–‡ä»¶å­˜åœ¨æ€§ ======"
find backend -name "test_*.py" | wc -l          # >0 è¡¨ç¤ºæœ‰æµ‹è¯•æ–‡ä»¶
echo "====== 2  å•æµ‹å¯è¿è¡Œ ======"
pytest backend/tests --collect-only -q | tail -1
echo "====== 3  è¦†ç›–ç‡é˜ˆå€¼ ======"
pytest --cov=backend --cov-report=term-missing --cov-fail-under=80
echo "====== 4  å›å½’æµ‹è¯• ======"
pytest backend/tests/test_regression.py
echo "====== 5  E2E å¯è·‘ ======"
npx playwright test --reporter=line
echo "====== 6  éšæœºç ´åï¼ˆMutationï¼‰ ======"
pip install mutmut
mutmut run --paths-to-mutate=backend/apps || echo "Mutation æµ‹è¯•å·²è·‘å®Œ"
```

ä¸€é”®æ‰§è¡Œï¼š

```bash
chmod +x health_check.sh
./health_check.sh
```

ç»“æœåˆ¤å®š

| æ£€æŸ¥é¡¹       | é€šè¿‡æ ‡å‡†        | å¤±è´¥å³è¯´æ˜              |
| ------------ | --------------- | ----------------------- |
| 1 æµ‹è¯•æ–‡ä»¶æ•° | â‰¥1              | Cursor æ ¹æœ¬æ²¡å»ºæµ‹è¯•æ–‡ä»¶ |
| 2 å•æµ‹å¯è¿è¡Œ | 0 error         | æµ‹è¯•æ–‡ä»¶è¯­æ³•/ä¾èµ–é”™è¯¯   |
| 3 è¦†ç›–ç‡     | â‰¥80 %           | å¤§é‡ä»£ç æ— æµ‹è¯•          |
| 4 å›å½’æµ‹è¯•   | 100 % pass      | å·²æœ‰åŠŸèƒ½è¢«ç ´å          |
| 5 E2E        | 0 error         | å‰ç«¯/æ¥å£é“¾è·¯æœªè¦†ç›–     |
| 6 Mutation   | kill-rate â‰¥60 % | æµ‹è¯•è´¨é‡ä½ï¼ˆæ–­è¨€å¼±ï¼‰    |

**è·‘ `health_check.sh` 6 é¡¹å…¨ç»¿ï¼Œå°±è¯´æ˜ Cursor çœŸçš„ç»™ä½ æ­å¥½äº†å®Œæ•´æµ‹è¯•ä½“ç³»ï¼›ä»»ä½•ä¸€é¡¹çº¢ï¼Œå°±æŒ‰å¯¹åº”ç¼ºå£æ‰“å›è¡¥æµ‹ã€‚**

#### æˆ‘å¦‚ä½•èƒ½å¤Ÿå°†æ‰€æœ‰çš„æµ‹è¯•æ–‡ä»¶å…¥å£åˆ°ä¸€ä¸ªè„šæœ¬ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€å›å½’æµ‹è¯•ã€å‰ç«¯æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€è¾¹ç¼˜æµ‹è¯•ã€åç«¯æµ‹è¯•ï¼Œplaywrightã€selenium ç­‰ç­‰å„ç§æµ‹è¯•ä½“ç³»å’Œæ¡†æ¶ï¼Œå¹¶ä¸”æ–°å¢ç”¨ä¾‹éƒ½è¦é“¾æ¥åˆ°è¿™ä¸ªè„šæœ¬ï¼Œæ¯æ¬¡å¼ºåˆ¶ä»–å»æ‰§è¡Œè¿™ä¸ªè„šæœ¬

ä¸šå†…æ ‡å‡†åšæ³•ï¼šåˆ†å±‚ä»»åŠ¡ç¼–æ’ï¼ˆTask Runnerï¼‰

| å±‚çº§         | å·¥å…·                                          | è¯´æ˜             | ç¤ºä¾‹                                    |
| ------------ | --------------------------------------------- | ---------------- | --------------------------------------- |
| **ç»Ÿä¸€å…¥å£** | `justfile` / `Makefile` / `npm scripts`       | ä¸€æ¡å‘½ä»¤è·‘æ‰€æœ‰   | `make test`                             |
| **åˆ†å±‚ä»»åŠ¡** | `pytest` + `playwright` + `lighthouse` + `k6` | å„è‡ªç‹¬ç«‹ï¼Œå¯å¹¶è¡Œ | `make test-unit`, `make test-e2e`       |
| **è‡ªåŠ¨æ”¶å½•** | **é€šé…ç¬¦ + ç›®å½•çº¦å®š**                         | æ–°å¢æ–‡ä»¶é›¶é…ç½®   | `tests/**/test_*.py` è‡ªåŠ¨è¢« pytest æ”¶é›† |

æ¨èæ–¹æ¡ˆï¼šç”¨ `Makefile`ï¼ˆè·¨å¹³å°ï¼Œä¸€è¡Œå‘½ä»¤ï¼‰

1ï¸âƒ£ åˆ›å»º `Makefile`

```
.PHONY: test test-unit test-e2e test-perf test-regression

# ä¸€é”®è·‘æ‰€æœ‰
test: test-unit test-e2e test-perf test-regression

# å•å…ƒï¼ˆDjangoï¼‰
test-unit:
	pytest backend/tests -q --cov=backend --cov-fail-under=80

# E2Eï¼ˆPlaywrightï¼‰
test-e2e:
	npx playwright test --reporter=line

# æ€§èƒ½ï¼ˆLighthouseï¼‰
test-perf:
	npx lhci autorun

# å›å½’
test-regression:
	pytest backend/tests/test_regression.py

# å‰ç«¯å•å…ƒ
test-frontend:
	npm run test:unit --prefix frontend
```

2ï¸âƒ£ ç»Ÿä¸€å…¥å£è„šæœ¬ï¼ˆå¯é€‰ï¼ŒCI/æœ¬åœ°é€šç”¨ï¼‰

```bash
#!/bin/bash
# test_all.sh
set -e
echo "ğŸ§ª å¼€å§‹å…¨é‡æµ‹è¯•â€¦"
make test
echo "âœ… å…¨éƒ¨é€šè¿‡"
```

3ï¸âƒ£ æ–°å¢ç”¨ä¾‹è‡ªåŠ¨æ”¶å½•

- **åç«¯**ï¼š`backend/tests/**/test_*.py`ï¼ˆpytest è‡ªåŠ¨æ”¶é›†ï¼‰
- **å‰ç«¯**ï¼š`frontend/tests/**/*.test.js`ï¼ˆVitest è‡ªåŠ¨æ”¶é›†ï¼‰
- **E2E**ï¼š`e2e/**/*.spec.js`ï¼ˆPlaywright è‡ªåŠ¨æ”¶é›†ï¼‰
- **æ€§èƒ½**ï¼š`lighthouserc.js` é€šé…ç¬¦ `**/lhci/**/*.json`

âœ… ä¸€é”®éªŒè¯ï¼ˆæ–°å¢ç”¨ä¾‹è‡ªåŠ¨è¿›è„šæœ¬ï¼‰

bash

å¤åˆ¶

```bash
# æœ¬åœ°
./test_all.sh
# CI
- uses: actions/checkout@v4
- run: ./test_all.sh
```

âœ… ä¸€å¥è¯æ€»ç»“

> **ä¸šå†…æ™®éç”¨ã€ŒMakefile / Taskfileã€åšç»Ÿä¸€å…¥å£ï¼Œæ‰€æœ‰æµ‹è¯•æ¡†æ¶å„è‡ªç›®å½• + é€šé…ç¬¦è‡ªåŠ¨æ”¶å½•ï¼›æ–°å¢æ–‡ä»¶é›¶é…ç½®å³å¯è¢«è·‘ã€‚**








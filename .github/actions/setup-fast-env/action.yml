name: Setup Fast Environment
description: "Quick environment setup for fast checks"

runs:
  using: "composite"
  steps:
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: "20"

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.11"

    - name: Create and Setup Virtual Environment
      shell: bash
      working-directory: ./backend
      run: |
        echo "âš¡ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–..."

        # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
        if [ ! -d ".venv" ]; then
          echo "ğŸ“¦ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ..."
          python -m venv .venv
        else
          echo "âœ… è™šæ‹Ÿç¯å¢ƒå·²å­˜åœ¨"
        fi

        # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
        source .venv/bin/activate
        echo "ğŸ“¥ å®‰è£…å¿…è¦çš„Pythonä¾èµ–..."
        pip install --upgrade pip wheel
        pip install flake8==6.0.0 django-debug-toolbar==4.2.0 django-extensions==3.2.3 || echo "éƒ¨åˆ†ä¾èµ–å®‰è£…å¤±è´¥ï¼Œç»§ç»­æ‰§è¡Œ"

        echo "âœ… è™šæ‹Ÿç¯å¢ƒè®¾ç½®å®Œæˆ"

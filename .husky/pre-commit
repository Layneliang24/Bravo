#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 运行快速代码变更检查（仅检查暂存文件）
echo "🚀 运行快速提交前检查..."
python scripts/fast_pre_commit.py

# 检查退出码
if [ $? -ne 0 ]; then
    echo "❌ 快速检查失败，请解决问题后再提交"
    echo "💡 提示: 使用 'git commit --no-verify' 可跳过检查"
    exit 1
fi

# 运行原有的lint检查
npx lint-staged
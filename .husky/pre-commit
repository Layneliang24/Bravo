#!/bin/sh

# 运行完整的pre-commit检查
echo "[STRICT] 运行严格的提交前检查..."
echo "[INFO] 提示: 严格模式已启用，不允许跳过任何检查"

# 运行代码质量检查
python scripts/code_change_tracker.py --validate-commit

# 运行lint检查
npx lint-staged

# 检查退出码
if [ $? -ne 0 ]; then
    echo "[ERROR] 提交检查失败，请解决所有问题后再提交"
    echo "[STRICT] 严格模式: 不允许使用 --no-verify 跳过检查"
    exit 1
fi

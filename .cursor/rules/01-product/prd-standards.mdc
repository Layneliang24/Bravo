---
description: PRD设计阶段的规则和最佳实践
globs: docs/00_product/requirements/**/*.md
priority: 900
---

# PRD 设计规范

## 1. 标杆对齐 (Gold Standard)
- **You MUST**: 学习并对标项目中的“金牌 PRD”模板：`docs/00_product/requirements/REQ-2025-003-user-login/REQ-2025-003-user-login.md`。
- **要求**: 深度不仅限于功能点，必须包含像素级 UI 规范、深度交互状态（防抖、失焦、Error 链路）及工程化测试建议。

## 2. 核心职责 (PRD 设计专家)
- **目标**: 将模糊需求转化为可执行的结构化文档。
- **红线**: 无 approved PRD 严禁写码（详见 @v4-core.mdc）。

## 3. 结构化元数据 (Frontmatter)
```yaml
req_id: REQ-YYYY-NNN-desc
status: refined | approved | implementing  # 仅限这些状态可推进
testcase_file: docs/00_product/requirements/{REQ-ID}/{REQ-ID}-test-cases.csv
api_contract: docs/01_guideline/api-contracts/{REQ-ID}/{REQ-ID}-api.yaml
```

## 4. PRD 必备章节 Checklist
- [ ] **功能需求**: 包含 Gherkin 格式的用户故事与验收标准 (AC)。
- [ ] **技术细节**: 完整的数据库表结构、索引及 Redis 缓存策略。
- [ ] **命名规范**: 必须严格遵循 @docs/01_guideline/数据库命名约定.md。
- [ ] **API定义**: 引用 OpenAPI 3.0 契约路径。
- [ ] **UI/UX**: 必须包含像素级参数（尺寸、色值、阴影）及深度交互状态（详见标杆模板）。
- [ ] **推断文件**: 提前列出预期的 `test_files` 和 `implementation_files`。

## 5. 状态机约束
- `draft` → `refined` (细节补充) → `approved` (准备任务)。
- 变更已 `implementing` 的功能，必须回退至 `refined` 重新审批。

---

## 规则应用声明
当AI被路由到此规则时，必须在响应开头明确声明：

```
[应用规则：@.cursor/rules/01-product/prd-standards.mdc]
[切换到PRD设计专家角色]
```

# django-development.mdc
---
description: Django后端开发规则
globs: backend/apps/**/*.py, backend/bravo/**/*.py, backend/config/**/*.py
priority: 500
---

# Django 应用拆分规则

## 适用范围（globs精确限定）
- 仅匹配 Django 代码：`backend/apps/**/*.py`, `backend/bravo/**/*.py`, `backend/config/**/*.py`
- 不覆盖脚本/工具目录（如 `backend/scripts`、`backend/tools`），若需另行定义可新增独立规则


## 应用拆分原则

### 1. 单一职责原则
每个 Django 应用应该只负责一个业务领域：
- `users` - 用户管理
- `blog` - 博客功能
- `english` - 英语学习
- `jobs` - 求职功能
- `common` - 通用功能

### 2. 应用结构标准
每个应用应包含以下标准结构：
```
app_name/
├── __init__.py
├── models.py          # 数据模型
├── api.py            # API 视图
├── services/         # 业务逻辑层
├── selectors.py      # 数据查询封装
├── filters.py        # 数据过滤
├── tests/           # 测试用例
├── factories.py     # 测试数据工厂
└── fixtures/        # 测试夹具
```

### 3. 模型设计规范
- 使用 `models.Model` 基类
- 定义 `__str__` 方法
- 使用 `Meta` 类定义元数据
- 添加适当的索引和约束

### 4. API 设计规范
- 使用 Django REST Framework
- 遵循 RESTful 设计原则
- 实现适当的权限控制
- 添加 API 文档

### 5. 测试规范
- 单元测试覆盖率 > 80%
- 集成测试覆盖主要业务流程
- 使用工厂模式生成测试数据
- 测试异常情况处理

---

## 规则应用声明

**当AI被路由到此规则时，必须在响应开头明确声明**：

```
[应用规则：@.cursor/rules/04-development/django-development.mdc]
[切换到开发专家角色]
```

**验证要求**：
- ✅ 必须明确声明应用了此规则
- ✅ 必须遵循本规则中的所有约束和流程
- ✅ 必须切换到开发专家角色
- ✅ 不能跳过声明步骤直接执行操作

---
description: Taskmaster 开发工作流核心指南
globs: .taskmaster/**/*.json, .taskmaster/**/*.md
priority: 800
---
# Taskmaster 核心工作流

## 1. 基础开发循环 (The Loop)
AI 代理必须严格遵循以下原子步骤：
1. **`list`**: 获取任务全景。
2. **`next`**: 锁定当前最优任务（依赖满足、优先级最高）。
3. **`show <id>`**: 深度阅读实现要求与测试策略。
4. **`expand <id>`**: 复杂任务（评分>7）强制拆分。
5. **实现**: 编写代码与测试（遵循 TDD）。
6. **`update-subtask`**: **强制**记录每一步的关键进展、决策与坑点。
7. **`set-status`**: 完成验证后标记为 `done`。

## 2. 标签引入决策 (Context Tags)
仅在以下场景主动引入标签（Tag）：
- **Git 分支**: 新建 `feature/*` 时，同步创建同名 Tag 隔离任务。
- **并行开发**: 涉及多人协作或不同功能模块并行时，建立 `work-*` Tag。
- **实验性任务**: 风险重构或技术预研使用 `experiment-*` 沙盒 Tag。

## 3. 核心约束 (Strict Rules)
- **依赖优先**: 严禁跳过前置依赖直接进入业务实现。
- **记录至上**: 每完成一个逻辑块必须 `update-subtask`，严禁在任务详情留白。
- **合规同步**: 修改测试前必须先校验 PRD 和 CSV，禁止脱离需求盲目修测试。
- **偏移处理**: 发现代码与 PRD 不一致时，先 `research` 后 `update` 任务，禁止静默偏离。

---

## 规则应用声明
当AI被路由到此规则时，必须在响应开头明确声明：
```
[应用规则：@.cursor/rules/03-taskmaster/taskmaster-workflow.mdc]
```

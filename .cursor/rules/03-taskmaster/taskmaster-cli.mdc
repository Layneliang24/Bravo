---
description: Taskmaster MCPå·¥å…·ä¸CLIå‘½ä»¤ä¸­æ–‡å‚è€ƒ
globs: .taskmaster/**/*.json, .taskmaster/**/*.md
priority: 800
---

# Taskmaster å·¥å…·ä¸å‘½ä»¤å‚è€ƒï¼ˆä¸­æ–‡ï¼‰

æœ¬æ–‡æ˜¯ Taskmaster çš„ä¸­æ–‡å‚è€ƒï¼Œæ¶µç›–æ¨èçš„ MCP å·¥å…·ï¼ˆé€‚ç”¨äº Cursor ç­‰ï¼‰ä»¥åŠç­‰ä»·çš„ `task-master` CLI å‘½ä»¤ã€‚CLI ä¸»è¦ä½œä¸ºäººå·¥/å¤‡ç”¨é€”å¾„ï¼›é›†æˆåœºæ™¯ä¼˜å…ˆä½¿ç”¨ MCP å·¥å…·ï¼ˆç»“æ„åŒ–è¾“å‡ºã€é”™è¯¯å¤„ç†æ›´å¥½ï¼‰ã€‚

**é‡è¦ï¼š** ä»¥ä¸‹ MCP å·¥å…·ä¼šè°ƒç”¨ AIï¼š`parse_prd`ã€`analyze_project_complexity`ã€`update_subtask`ã€`update_task`ã€`update`ã€`expand_all`ã€`expand_task`ã€`add_task`ã€‚

**ğŸ·ï¸ æ ‡ç­¾åŒ–ä»»åŠ¡åˆ—è¡¨ï¼š** æ”¯æŒå¤šä¸Šä¸‹æ–‡çš„ tagï¼ˆå¦‚ feature åˆ†æ”¯ã€å®éªŒåˆ†æ”¯ï¼‰ã€‚ç¼ºçœ tag ä¸º masterï¼›å¤§å¤šæ•°å‘½ä»¤æ”¯æŒ `--tag <name>`ã€‚

---

## åˆå§‹åŒ–ä¸é…ç½®

### 1. åˆå§‹åŒ–é¡¹ç›®ï¼ˆ`init`ï¼‰

- **MCP å·¥å…·**ï¼š`initialize_project`
- **CLI å‘½ä»¤**ï¼š`task-master init [options]`
- **ä½œç”¨**ï¼šåœ¨å½“å‰ç›®å½•åˆå§‹åŒ– Taskmaster åŸºç¡€ç»“æ„å’Œé…ç½®ã€‚
- **å¸¸ç”¨ CLI é€‰é¡¹**ï¼š
  - `--name <name>` é¡¹ç›®åç§°
  - `--description <text>` é¡¹ç›®æè¿°
  - `--version <version>` åˆå§‹ç‰ˆæœ¬
  - `-y, --yes` æ— äº¤äº’å¿«é€Ÿåˆå§‹åŒ–
- **MCP å‚æ•°**ï¼š`projectName`ã€`projectDescription`ã€`projectVersion`ã€`authorName`ã€`skipInstall`ã€`addAliases`ã€`yes`
- **æ³¨æ„**ï¼šåˆå§‹åŒ–åå¿…é¡»æ‰§è¡Œ parse-prd æ‰ä¼šç”Ÿæˆ tasks.jsonã€‚å¯ç”¨ `.taskmaster/templates/example_prd.txt` ä½œä¸ºæ ·ä¾‹ã€‚
- **æ ‡ç­¾**ï¼š`--tag <name>` å¯ç›´æ¥è§£æåˆ°ç‰¹å®š tagï¼Œè‹¥ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºã€‚

### 2. è§£æ PRDï¼ˆ`parse_prd`ï¼‰

- **MCP å·¥å…·**ï¼š`parse_prd`
- **CLI å‘½ä»¤**ï¼š`task-master parse-prd [file] [options]`
- **ä½œç”¨**ï¼šè§£æ PRD/æ–‡æœ¬ç”Ÿæˆåˆå§‹ tasks.jsonã€‚
- **å‚æ•°**ï¼š
  - `input` / `[file]`ï¼šPRD æ–‡ä»¶è·¯å¾„
  - `output`ï¼šè¾“å‡ºè·¯å¾„ï¼ˆé»˜è®¤ `.taskmaster/tasks/tasks.json`ï¼‰
  - `numTasks`ï¼šæœŸæœ›é¡¶å±‚ä»»åŠ¡æ•°
  - `force`ï¼šè¦†ç›–å·²æœ‰ tasks.json
- **è¦ç‚¹**ï¼š
  - ä¸¥æ ¼éµå¾ª PRD ä¸­çš„çº¦æŸï¼ˆåº“/æ¶æ„/æŠ€æœ¯æ ˆç­‰ï¼‰
  - è¿™æ˜¯ AI è°ƒç”¨ï¼Œå¯èƒ½è€—æ—¶ï¼›æ—  PRD æ—¶å¯ç”¨æ¨¡æ¿ `.taskmaster/templates/example_prd.txt`

---

## AI æ¨¡å‹é…ç½®

### 2. ç®¡ç†æ¨¡å‹ï¼ˆ`models`ï¼‰
- **MCP å·¥å…·**ï¼š`models`
- **CLI å‘½ä»¤**ï¼š`task-master models [options]`
- **ä½œç”¨**ï¼šæŸ¥çœ‹/è®¾ç½®ä¸»æ¨¡å‹ã€ç ”ç©¶æ¨¡å‹ã€å…œåº•æ¨¡å‹ï¼›æ”¯æŒè‡ªå®šä¹‰ Ollama / OpenRouter / Bedrockã€‚
- **MCP å‚æ•°**ï¼š`setMain`ã€`setResearch`ã€`setFallback`ã€`ollama`ã€`openrouter`ã€`listAvailableModels`
- **CLI é€‰é¡¹**ï¼š`--set-main` / `--set-research` / `--set-fallback` + `--ollama` / `--openrouter` / `--bedrock`ï¼Œæˆ– `--setup` äº¤äº’é…ç½®
- **å­˜å‚¨ä½ç½®**ï¼š`.taskmaster/config.json`ï¼ˆè¯·å‹¿æ‰‹åŠ¨ç¼–è¾‘ï¼Œä½¿ç”¨å‘½ä»¤ä¿®æ”¹ï¼‰
- **API Key**ï¼šæ”¾åœ¨ `.env`ï¼ˆCLIï¼‰æˆ– `.cursor/mcp.json`ï¼ˆMCPï¼‰ä¸­
- **è´¹ç”¨æç¤º**ï¼šæ¨¡å‹è´¹ç”¨ä»¥ç¾å…ƒè®¡ä»·ï¼ˆç¤ºä¾‹ï¼š0.8 å³ $0.80ï¼‰

---

## Task Listing & Viewing

### 3. Get Tasks (`get_tasks`)

*   **MCP Tool:** `get_tasks`
*   **CLI Command:** `task-master list [options]`
*   **Description:** `List your Taskmaster tasks, optionally filtering by status and showing subtasks.`
*   **Key Parameters/Options:**
    *   `status`: `Show only Taskmaster tasks matching this status (or multiple statuses, comma-separated), e.g., 'pending' or 'done,in-progress'.` (CLI: `-s, --status <status>`)
    *   `withSubtasks`: `Include subtasks indented under their parent tasks in the list.` (CLI: `--with-subtasks`)
    *   `tag`: `Specify which tag context to list tasks from. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Get an overview of the project status, often used at the start of a work session.

### 4. Get Next Task (`next_task`)

*   **MCP Tool:** `next_task`
*   **CLI Command:** `task-master next [options]`
*   **Description:** `Ask Taskmaster to show the next available task you can work on, based on status and completed dependencies.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
    *   `tag`: `Specify which tag context to use. Defaults to the current active tag.` (CLI: `--tag <name>`)
*   **Usage:** Identify what to work on next according to the plan.

### 5. Get Task Details (`get_task`)

*   **MCP Tool:** `get_task`
*   **CLI Command:** `task-master show [id] [options]`
*   **Description:** `Display detailed information for one or more specific Taskmaster tasks or subtasks by ID.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task (e.g., '15'), subtask (e.g., '15.2'), or a comma-separated list of IDs ('1,5,10.2') you want to view.` (CLI: `[id]` positional or `-i, --id <id>`)
    *   `tag`: `Specify which tag context to get the task(s) from. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Understand the full details for a specific task. When multiple IDs are provided, a summary table is shown.
*   **CRITICAL INFORMATION** If you need to collect information from multiple tasks, use comma-separated IDs (i.e. 1,2,3) to receive an array of tasks. Do not needlessly get tasks one at a time if you need to get many as that is wasteful.

---

## Task Creation & Modification

### 6. Add Task (`add_task`)

*   **MCP Tool:** `add_task`
*   **CLI Command:** `task-master add-task [options]`
*   **Description:** `Add a new task to Taskmaster by describing it; AI will structure it.`
*   **Key Parameters/Options:**
    *   `prompt`: `Required. Describe the new task you want Taskmaster to create, e.g., "Implement user authentication using JWT".` (CLI: `-p, --prompt <text>`)
    *   `dependencies`: `Specify the IDs of any Taskmaster tasks that must be completed before this new one can start, e.g., '12,14'.` (CLI: `-d, --dependencies <ids>`)
    *   `priority`: `Set the priority for the new task: 'high', 'medium', or 'low'. Default is 'medium'.` (CLI: `--priority <priority>`)
    *   `research`: `Enable Taskmaster to use the research role for potentially more informed task creation.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to add the task to. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Quickly add newly identified tasks during development.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 7. Add Subtask (`add_subtask`)

*   **MCP Tool:** `add_subtask`
*   **CLI Command:** `task-master add-subtask [options]`
*   **Description:** `Add a new subtask to a Taskmaster parent task, or convert an existing task into a subtask.`
*   **Key Parameters/Options:**
    *   `id` / `parent`: `Required. The ID of the Taskmaster task that will be the parent.` (MCP: `id`, CLI: `-p, --parent <id>`)
    *   `taskId`: `Use this if you want to convert an existing top-level Taskmaster task into a subtask of the specified parent.` (CLI: `-i, --task-id <id>`)
    *   `title`: `Required if not using taskId. The title for the new subtask Taskmaster should create.` (CLI: `-t, --title <title>`)
    *   `description`: `A brief description for the new subtask.` (CLI: `-d, --description <text>`)
    *   `details`: `Provide implementation notes or details for the new subtask.` (CLI: `--details <text>`)
    *   `dependencies`: `Specify IDs of other tasks or subtasks, e.g., '15' or '16.1', that must be done before this new subtask.` (CLI: `--dependencies <ids>`)
    *   `status`: `Set the initial status for the new subtask. Default is 'pending'.` (CLI: `-s, --status <status>`)
    *   `generate`: `Enable Taskmaster to regenerate markdown task files after adding the subtask.` (CLI: `--generate`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Break down tasks manually or reorganize existing tasks.

### 8. Update Tasks (`update`)

*   **MCP Tool:** `update`
*   **CLI Command:** `task-master update [options]`
*   **Description:** `Update multiple upcoming tasks in Taskmaster based on new context or changes, starting from a specific task ID.`
*   **Key Parameters/Options:**
    *   `from`: `Required. The ID of the first task Taskmaster should update. All tasks with this ID or higher that are not 'done' will be considered.` (CLI: `--from <id>`)
    *   `prompt`: `Required. Explain the change or new context for Taskmaster to apply to the tasks, e.g., "We are now using React Query instead of Redux Toolkit for data fetching".` (CLI: `-p, --prompt <text>`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Handle significant implementation changes or pivots that affect multiple future tasks. Example CLI: `task-master update --from='18' --prompt='Switching to React Query.\nNeed to refactor data fetching...'`
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 9. Update Task (`update_task`)

*   **MCP Tool:** `update_task`
*   **CLI Command:** `task-master update-task [options]`
*   **Description:** `Modify a specific Taskmaster task by ID, incorporating new information or changes. By default, this replaces the existing task details.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The specific ID of the Taskmaster task, e.g., '15', you want to update.` (CLI: `-i, --id <id>`)
    *   `prompt`: `Required. Explain the specific changes or provide the new information Taskmaster should incorporate into this task.` (CLI: `-p, --prompt <text>`)
    *   `append`: `If true, appends the prompt content to the task's details with a timestamp, rather than replacing them. Behaves like update-subtask.` (CLI: `--append`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context the task belongs to. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Refine a specific task based on new understanding. Use `--append` to log progress without creating subtasks.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 10. Update Subtask (`update_subtask`)

*   **MCP Tool:** `update_subtask`
*   **CLI Command:** `task-master update-subtask [options]`
*   **Description:** `Append timestamped notes or details to a specific Taskmaster subtask without overwriting existing content. Intended for iterative implementation logging.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster subtask, e.g., '5.2', to update with new information.` (CLI: `-i, --id <id>`)
    *   `prompt`: `Required. The information, findings, or progress notes to append to the subtask's details with a timestamp.` (CLI: `-p, --prompt <text>`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context the subtask belongs to. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Log implementation progress, findings, and discoveries during subtask development. Each update is timestamped and appended to preserve the implementation journey.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 11. Set Task Status (`set_task_status`)

*   **MCP Tool:** `set_task_status`
*   **CLI Command:** `task-master set-status [options]`
*   **Description:** `Update the status of one or more Taskmaster tasks or subtasks, e.g., 'pending', 'in-progress', 'done'.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster task(s) or subtask(s), e.g., '15', '15.2', or '16,17.1', to update.` (CLI: `-i, --id <id>`)
    *   `status`: `Required. The new status to set, e.g., 'done', 'pending', 'in-progress', 'review', 'cancelled'.` (CLI: `-s, --status <status>`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Mark progress as tasks move through the development cycle.

### 12. Remove Task (`remove_task`)

*   **MCP Tool:** `remove_task`
*   **CLI Command:** `task-master remove-task [options]`
*   **Description:** `Permanently remove a task or subtask from the Taskmaster tasks list.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task, e.g., '5', or subtask, e.g., '5.2', to permanently remove.` (CLI: `-i, --id <id>`)
    *   `yes`: `Skip the confirmation prompt and immediately delete the task.` (CLI: `-y, --yes`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Permanently delete tasks or subtasks that are no longer needed in the project.
*   **Notes:** Use with caution as this operation cannot be undone. Consider using 'blocked', 'cancelled', or 'deferred' status instead if you just want to exclude a task from active planning but keep it for reference. The command automatically cleans up dependency references in other tasks.

---

## Task Structure & Breakdown

### 13. Expand Task (`expand_task`)

*   **MCP Tool:** `expand_task`
*   **CLI Command:** `task-master expand [options]`
*   **Description:** `Use Taskmaster's AI to break down a complex task into smaller, manageable subtasks. Appends subtasks by default.`
*   **Key Parameters/Options:**
    *   `id`: `The ID of the specific Taskmaster task you want to break down into subtasks.` (CLI: `-i, --id <id>`)
    *   `num`: `Optional: Suggests how many subtasks Taskmaster should aim to create. Uses complexity analysis/defaults otherwise.` (CLI: `-n, --num <number>`)
    *   `research`: `Enable Taskmaster to use the research role for more informed subtask generation. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `prompt`: `Optional: Provide extra context or specific instructions to Taskmaster for generating the subtasks.` (CLI: `-p, --prompt <text>`)
    *   `force`: `Optional: If true, clear existing subtasks before generating new ones. Default is false (append).` (CLI: `--force`)
    *   `tag`: `Specify which tag context the task belongs to. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Generate a detailed implementation plan for a complex task before starting coding. Automatically uses complexity report recommendations if available and `num` is not specified.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 14. Expand All Tasks (`expand_all`)

*   **MCP Tool:** `expand_all`
*   **CLI Command:** `task-master expand --all [options]` (Note: CLI uses the `expand` command with the `--all` flag)
*   **Description:** `Tell Taskmaster to automatically expand all eligible pending/in-progress tasks based on complexity analysis or defaults. Appends subtasks by default.`
*   **Key Parameters/Options:**
    *   `num`: `Optional: Suggests how many subtasks Taskmaster should aim to create per task.` (CLI: `-n, --num <number>`)
    *   `research`: `Enable research role for more informed subtask generation. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `prompt`: `Optional: Provide extra context for Taskmaster to apply generally during expansion.` (CLI: `-p, --prompt <text>`)
    *   `force`: `Optional: If true, clear existing subtasks before generating new ones for each eligible task. Default is false (append).` (CLI: `--force`)
    *   `tag`: `Specify which tag context to expand. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Useful after initial task generation or complexity analysis to break down multiple tasks at once.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 15. Clear Subtasks (`clear_subtasks`)

*   **MCP Tool:** `clear_subtasks`
*   **CLI Command:** `task-master clear-subtasks [options]`
*   **Description:** `Remove all subtasks from one or more specified Taskmaster parent tasks.`
*   **Key Parameters/Options:**
    *   `id`: `The ID(s) of the Taskmaster parent task(s) whose subtasks you want to remove, e.g., '15' or '16,18'. Required unless using 'all'.` (CLI: `-i, --id <ids>`)
    *   `all`: `Tell Taskmaster to remove subtasks from all parent tasks.` (CLI: `--all`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Used before regenerating subtasks with `expand_task` if the previous breakdown needs replacement.

### 16. Remove Subtask (`remove_subtask`)

*   **MCP Tool:** `remove_subtask`
*   **CLI Command:** `task-master remove-subtask [options]`
*   **Description:** `Remove a subtask from its Taskmaster parent, optionally converting it into a standalone task.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster subtask(s) to remove, e.g., '15.2' or '16.1,16.3'.` (CLI: `-i, --id <id>`)
    *   `convert`: `If used, Taskmaster will turn the subtask into a regular top-level task instead of deleting it.` (CLI: `-c, --convert`)
    *   `generate`: `Enable Taskmaster to regenerate markdown task files after removing the subtask.` (CLI: `--generate`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Delete unnecessary subtasks or promote a subtask to a top-level task.

### 17. Move Task (`move_task`)

*   **MCP Tool:** `move_task`
*   **CLI Command:** `task-master move [options]`
*   **Description:** `Move a task or subtask to a new position within the task hierarchy.`
*   **Key Parameters/Options:**
    *   `from`: `Required. ID of the task/subtask to move (e.g., "5" or "5.2"). Can be comma-separated for multiple tasks.` (CLI: `--from <id>`)
    *   `to`: `Required. ID of the destination (e.g., "7" or "7.3"). Must match the number of source IDs if comma-separated.` (CLI: `--to <id>`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Reorganize tasks by moving them within the hierarchy. Supports various scenarios like:
    *   Moving a task to become a subtask
    *   Moving a subtask to become a standalone task
    *   Moving a subtask to a different parent
    *   Reordering subtasks within the same parent
    *   Moving a task to a new, non-existent ID (automatically creates placeholders)
    *   Moving multiple tasks at once with comma-separated IDs
*   **Validation Features:**
    *   Allows moving tasks to non-existent destination IDs (creates placeholder tasks)
    *   Prevents moving to existing task IDs that already have content (to avoid overwriting)
    *   Validates that source tasks exist before attempting to move them
    *   Maintains proper parent-child relationships
*   **Example CLI:** `task-master move --from=5.2 --to=7.3` to move subtask 5.2 to become subtask 7.3.
*   **Example Multi-Move:** `task-master move --from=10,11,12 --to=16,17,18` to move multiple tasks to new positions.
*   **Common Use:** Resolving merge conflicts in tasks.json when multiple team members create tasks on different branches.

---

## Dependency Management

### 18. Add Dependency (`add_dependency`)

*   **MCP Tool:** `add_dependency`
*   **CLI Command:** `task-master add-dependency [options]`
*   **Description:** `Define a dependency in Taskmaster, making one task a prerequisite for another.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task that will depend on another.` (CLI: `-i, --id <id>`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that must be completed first, the prerequisite.` (CLI: `-d, --depends-on <id>`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <path>`)
*   **Usage:** Establish the correct order of execution between tasks.

### 19. Remove Dependency (`remove_dependency`)

*   **MCP Tool:** `remove_dependency`
*   **CLI Command:** `task-master remove-dependency [options]`
*   **Description:** `Remove a dependency relationship between two Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task you want to remove a prerequisite from.` (CLI: `-i, --id <id>`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that should no longer be a prerequisite.` (CLI: `-d, --depends-on <id>`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Update task relationships when the order of execution changes.

### 20. Validate Dependencies (`validate_dependencies`)

*   **MCP Tool:** `validate_dependencies`
*   **CLI Command:** `task-master validate-dependencies [options]`
*   **Description:** `Check your Taskmaster tasks for dependency issues (like circular references or links to non-existent tasks) without making changes.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to validate. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Audit the integrity of your task dependencies.

### 21. Fix Dependencies (`fix_dependencies`)

*   **MCP Tool:** `fix_dependencies`
*   **CLI Command:** `task-master fix-dependencies [options]`
*   **Description:** `Automatically fix dependency issues (like circular references or links to non-existent tasks) in your Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to fix dependencies in. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Clean up dependency errors automatically.

---

## Analysis & Reporting

### 22. Analyze Project Complexity (`analyze_project_complexity`)

*   **MCP Tool:** `analyze_project_complexity`
*   **CLI Command:** `task-master analyze-complexity [options]`
*   **Description:** `Have Taskmaster analyze your tasks to determine their complexity and suggest which ones need to be broken down further.`
*   **Key Parameters/Options:**
    *   `output`: `Where to save the complexity analysis report. Default is '.taskmaster/reports/task-complexity-report.json' (or '..._tagname.json' if a tag is used).` (CLI: `-o, --output <file>`)
    *   `threshold`: `The minimum complexity score (1-10) that should trigger a recommendation to expand a task.` (CLI: `-t, --threshold <number>`)
    *   `research`: `Enable research role for more accurate complexity analysis. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to analyze. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Used before breaking down tasks to identify which ones need the most attention.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 23. View Complexity Report (`complexity_report`)

*   **MCP Tool:** `complexity_report`
*   **CLI Command:** `task-master complexity-report [options]`
*   **Description:** `Display the task complexity analysis report in a readable format.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to show the report for. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to the complexity report (default: '.taskmaster/reports/task-complexity-report.json').` (CLI: `-f, --file <file>`)
*   **Usage:** Review and understand the complexity analysis results after running analyze-complexity.

---

## File Management

### 24. Generate Task Files (`generate`)

*   **MCP Tool:** `generate`
*   **CLI Command:** `task-master generate [options]`
*   **Description:** `Create or update individual Markdown files for each task based on your tasks.json.`
*   **Key Parameters/Options:**
    *   `output`: `The directory where Taskmaster should save the task files (default: in a 'tasks' directory).` (CLI: `-o, --output <directory>`)
    *   `tag`: `Specify which tag context to generate files for. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `file`: `Path to your Taskmaster 'tasks.json' file. Default relies on auto-detection.` (CLI: `-f, --file <file>`)
*   **Usage:** Run this after making changes to tasks.json to keep individual task files up to date. This command is now manual and no longer runs automatically.

---

## AI-Powered Research

### 25. Research (`research`)

*   **MCP Tool:** `research`
*   **CLI Command:** `task-master research [options]`
*   **Description:** `Perform AI-powered research queries with project context to get fresh, up-to-date information beyond the AI's knowledge cutoff.`
*   **Key Parameters/Options:**
    *   `query`: `Required. Research query/prompt (e.g., "What are the latest best practices for React Query v5?").` (CLI: `[query]` positional or `-q, --query <text>`)
    *   `taskIds`: `Comma-separated list of task/subtask IDs from the current tag context (e.g., "15,16.2,17").` (CLI: `-i, --id <ids>`)
    *   `filePaths`: `Comma-separated list of file paths for context (e.g., "src/api.js,docs/readme.md").` (CLI: `-f, --files <paths>`)
    *   `customContext`: `Additional custom context text to include in the research.` (CLI: `-c, --context <text>`)
    *   `includeProjectTree`: `Include project file tree structure in context (default: false).` (CLI: `--tree`)
    *   `detailLevel`: `Detail level for the research response: 'low', 'medium', 'high' (default: medium).` (CLI: `--detail <level>`)
    *   `saveTo`: `Task or subtask ID (e.g., "15", "15.2") to automatically save the research conversation to.` (CLI: `--save-to <id>`)
    *   `saveFile`: `If true, saves the research conversation to a markdown file in '.taskmaster/docs/research/'.` (CLI: `--save-file`)
    *   `noFollowup`: `Disables the interactive follow-up question menu in the CLI.` (CLI: `--no-followup`)
    *   `tag`: `Specify which tag context to use for task-based context gathering. Defaults to the current active tag.` (CLI: `--tag <name>`)
    *   `projectRoot`: `The directory of the project. Must be an absolute path.` (CLI: Determined automatically)
*   **Usage:** **This is a POWERFUL tool that agents should use FREQUENTLY** to:
    *   Get fresh information beyond knowledge cutoff dates
    *   Research latest best practices, library updates, security patches
    *   Find implementation examples for specific technologies
    *   Validate approaches against current industry standards
    *   Get contextual advice based on project files and tasks
*   **When to Consider Using Research:**
    *   **Before implementing any task** - Research current best practices
    *   **When encountering new technologies** - Get up-to-date implementation guidance (libraries, apis, etc)
    *   **For security-related tasks** - Find latest security recommendations
    *   **When updating dependencies** - Research breaking changes and migration guides
    *   **For performance optimization** - Get current performance best practices
    *   **When debugging complex issues** - Research known solutions and workarounds
*   **Research + Action Pattern:**
    *   Use `research` to gather fresh information
    *   Use `update_subtask` to commit findings with timestamps
    *   Use `update_task` to incorporate research into task details
    *   Use `add_task` with research flag for informed task creation
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. The research provides FRESH data beyond the AI's training cutoff, making it invaluable for current best practices and recent developments.

---

## æ ‡ç­¾ç®¡ç†

ç”¨äºç®¡ç†ä¸åŒæ ‡ç­¾ä¸Šä¸‹æ–‡çš„å‘½ä»¤ã€‚

### 26. List Tags (`tags`)
* **MCP å·¥å…·**ï¼š`list_tags`
* **CLI**ï¼š`task-master tags [options]`
* **è¯´æ˜**ï¼šåˆ—å‡ºæ‰€æœ‰æ ‡ç­¾åŠä»»åŠ¡æ•°é‡ã€å®ŒæˆçŠ¶æ€ç­‰å…ƒæ•°æ®ã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`file`ï¼ˆtasks.json è·¯å¾„ï¼‰ï¼Œ`--show-metadata`ï¼ˆæ˜¾ç¤ºè¯¦ç»†å…ƒæ•°æ®ï¼‰ã€‚

### 27. Add Tag (`add_tag`)
* **MCP å·¥å…·**ï¼š`add_tag`
* **CLI**ï¼š`task-master add-tag <tagName> [options]`
* **è¯´æ˜**ï¼šåˆ›å»ºæ–°æ ‡ç­¾ï¼Œå¯ä»å½“å‰/æŒ‡å®šæ ‡ç­¾å¤åˆ¶ä»»åŠ¡ã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`tagName`ã€`--from-branch`ã€`--copy-from-current`ã€`--copy-from <tag>`ã€`--description`ã€`file`ã€‚

### 28. Delete Tag (`delete_tag`)
* **MCP å·¥å…·**ï¼š`delete_tag`
* **CLI**ï¼š`task-master delete-tag <tagName> [options]`
* **è¯´æ˜**ï¼šåˆ é™¤æ ‡ç­¾åŠå…¶ä»»åŠ¡ã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`tagName`ã€`--yes`ã€`file`ã€‚

### 29. Use Tag (`use_tag`)
* **MCP å·¥å…·**ï¼š`use_tag`
* **CLI**ï¼š`task-master use-tag <tagName>`
* **è¯´æ˜**ï¼šåˆ‡æ¢å½“å‰æ´»åŠ¨æ ‡ç­¾ã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`tagName`ã€`file`ã€‚

### 30. Rename Tag (`rename_tag`)
* **MCP å·¥å…·**ï¼š`rename_tag`
* **CLI**ï¼š`task-master rename-tag <oldName> <newName>`
* **è¯´æ˜**ï¼šé‡å‘½åæ ‡ç­¾ã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`oldName`ã€`newName`ã€`file`ã€‚

### 31. Copy Tag (`copy_tag`)
* **MCP å·¥å…·**ï¼š`copy_tag`
* **CLI**ï¼š`task-master copy-tag <sourceName> <targetName> [options]`
* **è¯´æ˜**ï¼šå¤åˆ¶æ ‡ç­¾åŠå…¶ä»»åŠ¡åˆ°æ–°æ ‡ç­¾ã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`sourceName`ã€`targetName`ã€`--description`ã€‚

---

## å…¶ä»–

### 32. Sync Readme (`sync-readme`) â€” å®éªŒæ€§
* **CLI**ï¼š`task-master sync-readme [options]`
* **è¯´æ˜**ï¼šå°†ä»»åŠ¡åˆ—è¡¨å¯¼å‡ºåˆ°é¡¹ç›® READMEã€‚
* **å¸¸ç”¨å‚æ•°**ï¼š`status`ã€`withSubtasks`ã€`tag`ã€‚

---

## ç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ›´æ–°ï¼‰

Taskmaster ä¸»è¦ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ **`.taskmaster/config.json`** ç®¡ç†æ¨¡å‹ã€å‚æ•°ã€æ—¥å¿—ç­‰çº§ç­‰ï¼›é€šè¿‡ `task-master models --setup` ç»´æŠ¤ã€‚

ç¯å¢ƒå˜é‡ä»…å­˜æ”¾æ•æ„Ÿ API Key ä¸ç‰¹å®š endpointï¼š
- `ANTHROPIC_API_KEY` / `PERPLEXITY_API_KEY` / `OPENAI_API_KEY` / `GOOGLE_API_KEY` / `MISTRAL_API_KEY` / `AZURE_OPENAI_API_KEY`(+`AZURE_OPENAI_ENDPOINT`) / `OPENROUTER_API_KEY` / `XAI_API_KEY` / `OLLAMA_API_KEY`(+`OLLAMA_BASE_URL`)
- å¯é€‰ endpointï¼š`AZURE_OPENAI_ENDPOINT`ã€`OLLAMA_BASE_URL`ï¼ˆé»˜è®¤ `http://localhost:11434/api`ï¼‰

å°† API Key å†™å…¥é¡¹ç›®æ ¹ `.env`ï¼ˆCLIï¼‰æˆ– `.cursor/mcp.json` çš„ `env`ï¼ˆMCPï¼‰ã€‚å…¶ä»–è®¾ç½®ï¼ˆæ¨¡å‹ã€æ¸©åº¦ã€max tokensã€æ—¥å¿—çº§åˆ«ã€è‡ªå®šä¹‰ endpointï¼‰è¯·ç”¨ `task-master models` æˆ– MCP `models` å·¥å…·é…ç½®ã€‚

---

æ›´å¤šä¸å¼€å‘æµç¨‹çš„è¡”æ¥ï¼Œå‚è§ [dev_workflow.mdc](mdc:.cursor/rules/tools/taskmaster-workflow.mdc)ã€‚

---

## è§„åˆ™åº”ç”¨å£°æ˜

**å½“AIè¢«è·¯ç”±åˆ°æ­¤è§„åˆ™æ—¶ï¼Œå¿…é¡»åœ¨å“åº”å¼€å¤´æ˜ç¡®å£°æ˜**ï¼š

```
[åº”ç”¨è§„åˆ™ï¼š@.cursor/rules/03-taskmaster/taskmaster-cli.mdc]
```

**éªŒè¯è¦æ±‚**ï¼š
- âœ… å¿…é¡»æ˜ç¡®å£°æ˜åº”ç”¨äº†æ­¤è§„åˆ™
- âœ… å¿…é¡»éµå¾ªæœ¬è§„åˆ™ä¸­çš„æ‰€æœ‰çº¦æŸå’Œæµç¨‹
- âœ… ä¸èƒ½è·³è¿‡å£°æ˜æ­¥éª¤ç›´æ¥æ‰§è¡Œæ“ä½œ

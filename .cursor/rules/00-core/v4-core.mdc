---
description: V4架构核心宪法与不可逾越的红线 (alwaysApply)
globs: **/*
alwaysApply: true
priority: 1000
---

# V4 架构核心宪法

> **核心信念**：需求第一，代码即文档，规则即约束。

## 1. 六条铁律 (绝对遵循)
1. **PRD先行**: 无 approved PRD 严禁写码。
2. **用例先行**: 无评审通过的测试 CSV 严禁编写测试。
3. **测试先行**: 无测试文件或覆盖率 < 80% 严禁提交。遵循 TDD。
4. **任务先行**: 无 Task-Master 生成的 Task-ID 严禁编码。
5. **授权变更**: 修改/删除功能必须先获得 PRD 授权。
6. **合规不妥协**: 绝对禁止 `--no-verify` 及任何形式的绕过检查。

## 2. 追溯链要求
- **标准格式**: `REQ-ID -> Task-ID -> Test -> Code -> Commit`。
- **文件注释**: 代码/测试/配置顶部必须包含 `REQ-ID`。

## 3. 环境验证
- **浏览器自核**: 前端变更后必须使用 MCP 验证控制台与网络请求。
- **单一真源**: PRD 是逻辑的唯一真源，实现必须与 PRD 100% 对应。

## 4. 参考规范
- **目录结构**: @v4-directory-structure.mdc
- **TDD 流程**: @v4-tdd.mdc
- **追溯实现**: @v4-traceability.mdc

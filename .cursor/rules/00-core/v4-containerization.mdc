---
description: Docker容器化开发规范
globs: **/*
priority: 900
---

# Docker容器化开发规范

## 核心规则

**所有开发、构建、测试必须在Docker容器中进行**

## 命令格式

### 后端开发

```bash
# Django命令
docker-compose exec backend python manage.py <command>
docker-compose exec backend python manage.py makemigrations
docker-compose exec backend python manage.py migrate

# 测试
docker-compose exec backend pytest

# 代码质量检查
docker-compose exec backend black .
docker-compose exec backend isort .
docker-compose exec backend flake8 .
docker-compose exec backend pylint apps/
docker-compose exec backend mypy apps/
docker-compose exec backend bandit -r apps/
```

### 前端开发

```bash
# 开发服务器
docker-compose exec frontend npm run dev

# 构建
docker-compose exec frontend npm run build

# 测试
docker-compose exec frontend npm run test

# 代码质量检查
docker-compose exec frontend npm run format
docker-compose exec frontend npm run lint
docker-compose exec frontend npm run type-check
```

## 禁止操作

- ❌ 不能在宿主机执行`python manage.py`
- ❌ 不能在宿主机执行`npm run dev`
- ❌ 不能安装本地Python虚拟环境
- ❌ 不能安装本地MySQL/Redis
- ❌ 不能在宿主机直接运行`pip install`、`npm install`等命令

## 依赖管理

- 依赖安装和更新应在容器内部执行
- 使用`docker-compose exec backend pip install <package>`安装Python依赖
- 使用`docker-compose exec frontend npm install <package>`安装Node依赖

## 参考文档

@.cursorrules (Docker开发项目部分)

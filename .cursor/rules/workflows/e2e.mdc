---
description: E2E 测试规则
globs: e2e/tests/**/*.spec.ts
priority: 520
---

# E2E 测试规则

## 范围
- 仅匹配 E2E 测试：`e2e/tests/**/*.spec.ts`
- 不覆盖前端单测/集成测试

## 基本要求
- 测试行为，不测实现细节
- 场景覆盖：成功路径、异常路径、边界条件
- 独立可重复：禁止依赖外部不可控状态
- 超时控制：合理的超时与等待

## 最佳实践
- 使用稳定选择器（data-test-id），避免脆弱的 DOM 选择器
- 避免过长链式等待，优先显式等待关键状态
- 截图/视频：仅在失败时保存，减少存储

## 禁止事项
- ❌ 依赖未隔离的外部服务
- ❌ 使用随机 sleep 代替显式等待
- ❌ 将业务逻辑写进测试

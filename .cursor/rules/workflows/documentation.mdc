---
description: 文档维护规则
globs: docs/**/*.md, docs/**/*.mdx, .taskmaster/docs/**/*.md
priority: 500
---

# 文档维护规则

## 核心原则：代码即文档，规则即约束

**⚠️ 禁止创建虚文档**：
- ❌ 不要创建"说明文档"、"组织文档"、"最佳实践文档"等虚文档
- ❌ 不要创建用户不会看的文档（浪费token）
- ❌ 不要用文档"说明"设计，要用代码和规则"体现"设计

**✅ 正确的做法**：
- ✅ **能做的直接做**：改善代码、完善规则、补充测试
- ✅ **不能做的规则拦截**：用合规检查器、pre-commit hook强制约束
- ✅ **代码即文档**：清晰的代码结构、注释、类型提示就是最好的文档
- ✅ **规则即约束**：`.cursor/rules/*.mdc` 规则文件就是设计约束

**示例**：
- ❌ 错误：创建 `TEST-ORGANIZATION.md` 说明如何组织测试用例
- ✅ 正确：直接在CSV文件中按功能模块组织，用用例ID命名体现组织方式

- ❌ 错误：创建 `BEST-PRACTICES.md` 说明命名规范
- ✅ 正确：在合规检查器中强制验证命名格式，不符合直接报错

- ❌ 错误：创建 `WORKFLOW-EXPLANATION.md` 说明工作流程
- ✅ 正确：在pre-commit hook中强制检查，不符合流程直接拒绝提交

## 允许的文档类型

**必须存在的文档**：
1. **PRD文档** (`docs/00_product/requirements/{REQ-ID}/{REQ-ID}.md`)
   - 产品需求文档，需求的唯一真源
   - 必须存在，否则无法开发

2. **API契约文档** (`docs/01_guideline/api-contracts/{REQ-ID}/{REQ-ID}-api.yaml`)
   - OpenAPI规范，前后端并行开发的依据
   - 必须存在，否则无法开发

3. **架构文档** (`docs/architecture/V4/*.md`)
   - V4架构设计文档，系统设计的依据
   - 必须存在，否则无法理解系统

4. **测试用例CSV** (`docs/00_product/requirements/{REQ-ID}/{REQ-ID}-test-cases.csv`)
   - 测试用例设计，TDD的依据
   - 必须存在，否则无法编写测试

**禁止创建的文档类型**：
- ❌ "如何组织XXX"的说明文档
- ❌ "最佳实践"文档
- ❌ "设计说明"文档
- ❌ "工作流程说明"文档
- ❌ 任何用户不会主动查看的文档

**禁止创建的脚本类型**：
- ❌ 临时脚本、辅助脚本、一次性脚本
- ❌ 测试脚本、调试脚本、验证脚本
- ❌ 如果必须创建临时脚本，使用完毕后立即删除
- ❌ 不要留下成千上万个没用的脚本，不知道哪个可以删除

## 文档更新时机
- PRD修改时：更新PRD文档
- API变更时：更新API契约文档
- 架构变更时：更新架构文档
- Bug修复时：更新FAQ文档（仅限关键问题）

## 文档格式要求
- 使用Markdown格式
- 包含清晰的标题和目录
- 使用代码块展示示例
- 包含参考链接

## 验收检查
- [ ] 文档与最新实现一致
- [ ] 引用路径可访问
- [ ] 关键概念有示例或截图
- [ ] **没有创建虚文档**（说明类、组织类、最佳实践类）

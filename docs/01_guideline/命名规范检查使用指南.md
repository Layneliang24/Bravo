# Bravo 项目命名规范检查使用指南

## 概述

本指南说明了如何在 Bravo 项目中使用命名规范检查工具，确保代码和数据库结构符合项目统一的命名标准。

## 已配置的命名规范

### 1. Python 命名规范 (PEP 8)
- **文件位置**: `docs/01_guideline/命名规范.md`
- **检查工具**: flake8 + pylint
- **配置文件**: 
  - `backend/.flake8`
  - `backend/.pylintrc.naming`

### 2. Vue/TypeScript 命名规范
- **文件位置**: `docs/01_guideline/命名规范.md`
- **检查工具**: ESLint
- **配置文件**: `frontend/.eslintrc.js`

### 3. 数据库命名规范
- **文件位置**: `docs/01_guideline/数据库命名约定.md`
- **检查工具**: Django ORM 检查

## 安装依赖

### Python 依赖
```bash
cd backend
pip install -r requirements.txt
pip install flake8 pylint
```

### Node.js 依赖
```bash
cd frontend
npm install
```

## 使用方法

### 1. 手动检查命名规范

#### Linux/macOS
```bash
# 运行完整的命名规范检查
./scripts/check-naming-conventions.sh

# 或分别检查各个部分
# Python 检查
cd backend && python -m flake8 --select=N --config=.flake8 . && python -m pylint --rcfile=.pylintrc.naming .

# 前端检查
cd frontend && npx eslint --config .eslintrc.js src/
```

#### Windows
```cmd
# 运行完整的命名规范检查
scripts\check-naming-conventions.bat

# 或分别检查各个部分
# Python 检查
cd backend && python -m flake8 --select=N --config=.flake8 . && python -m pylint --rcfile=.pylintrc.naming .

# 前端检查
cd frontend && npx eslint --config .eslintrc.js src/
```

### 2. 自动检查（推荐）

项目已配置 pre-commit 钩子，在每次提交代码时自动检查命名规范：

```bash
# 安装 pre-commit
pip install pre-commit

# 安装 git 钩子
pre-commit install

# 手动运行所有检查
pre-commit run --all-files
```

### 3. 集成到 IDE

#### VS Code
安装以下扩展：
- Python: `ms-python.python`, `ms-python.pylint`, `ms-python.flake8`
- Vue/TypeScript: `Vue.volar`, `dbaeumer.vscode-eslint`

#### 配置示例
```json
// .vscode/settings.json
{
  "python.linting.enabled": true,
  "python.linting.flake8Enabled": true,
  "python.linting.pylintEnabled": true,
  "eslint.workingDirectories": ["frontend"],
  "eslint.validate": ["javascript", "typescript", "vue"]
}
```

## 常见问题和解决方案

### 1. 检查失败怎么办？

#### Python 检查失败
```bash
# 查看具体错误
python -m flake8 --select=N --config=backend/.flake8 backend/

# 自动修复一些格式问题
python -m black backend/
python -m isort backend/
```

#### 前端检查失败
```bash
# 查看具体错误
npx eslint --config frontend/.eslintrc.js frontend/src/

# 自动修复一些格式问题
npx prettier --write frontend/src/
npx eslint --config frontend/.eslintrc.js --fix frontend/src/
```

### 2. 需要忽略某些规则？

#### Python 忽略特定规则
在代码中添加注释：
```python
# 忽略特定行的命名检查
user_name = "test"  # noqa: N802

# 忽略整个文件的命名检查
# flake8: noqa: N
# pylint: disable=invalid-name
```

#### 前端忽略特定规则
在代码中添加注释：
```typescript
// eslint-disable-next-line @typescript-eslint/naming-convention
const userName = "test";

// eslint-disable @typescript-eslint/naming-convention
const someVariable = "value";
// eslint-enable @typescript-eslint/naming-convention
```

### 3. 数据库命名规范检查

#### Django 模型检查
```bash
# 检查模型定义
cd backend
python manage.py check

# 检查数据库迁移
python manage.py makemigrations --check --dry-run
```

#### 数据库结构验证
```bash
# 查看数据库表结构
python manage.py dbshell
\d tablename

# 查看索引
\d tablename
```

## 持续集成配置

### GitHub Actions
```yaml
# .github/workflows/naming-conventions.yml
name: Naming Convention Checks

on: [push, pull_request]

jobs:
  naming-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      
      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install Python dependencies
        run: |
          pip install flake8 pylint
          cd backend && pip install -r requirements.txt
      
      - name: Install Node.js dependencies
        run: |
          cd frontend && npm install
      
      - name: Run naming convention checks
        run: |
          chmod +x scripts/check-naming-conventions.sh
          ./scripts/check-naming-conventions.sh
```

## 最佳实践

### 1. 开发流程建议
1. **设计阶段**: 参考命名规范文档设计数据库结构
2. **编码阶段**: 使用 IDE 实时检查命名规范
3. **提交前**: 运行完整的命名规范检查
4. **代码审查**: 重点检查命名规范是否符合要求

### 2. 团队协作
- 在团队会议中定期回顾命名规范
- 建立命名规范知识库
- 为新成员提供命名规范培训

### 3. 文档维护
- 定期更新命名规范文档
- 记录特殊情况和例外规则
- 收集团队反馈并持续改进

## 联系支持

如果在使用过程中遇到问题：
1. 查看本文档的相关章节
2. 检查配置文件是否正确
3. 查看错误日志获取详细信息
4. 联系项目维护者

## 相关文件

- 命名规范文档: `docs/01_guideline/命名规范.md`
- 数据库命名约定: `docs/01_guideline/数据库命名约定.md`
- 检查脚本: `scripts/check-naming-conventions.sh` (Linux/macOS)
- 检查脚本: `scripts/check-naming-conventions.bat` (Windows)
- pre-commit 配置: `.pre-commit-config.yaml`
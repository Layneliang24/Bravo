# ğŸ“‚ æ–‡ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†æŒ‡å—

## ğŸ¯ ç›®æ ‡

é˜²æ­¢é¡¹ç›®ä¸­ç§¯ç´¯å¤§é‡ä¸´æ—¶æ–‡ä»¶ã€æµ‹è¯•è„šæœ¬å’Œè°ƒè¯•ä»£ç ï¼Œé€šè¿‡**å¼ºåˆ¶å…ƒæ•°æ®æ³¨é‡Š**å’Œ**å‘½åè§„èŒƒ**æ¥ç®¡ç†æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚

---

## ğŸ“‹ æ ¸å¿ƒç†å¿µ

### é—®é¢˜

- AI å’Œå¼€å‘è€…ç»å¸¸åˆ›å»ºä¸´æ—¶æµ‹è¯•æ–‡ä»¶
- æ—¶é—´ä¹…äº†ä¸çŸ¥é“å“ªäº›æ–‡ä»¶å¯ä»¥åˆ é™¤
- æ‹…å¿ƒè¯¯åˆ é‡è¦æ–‡ä»¶
- é¡¹ç›®ä¸­å……æ–¥ç€å„ç§ä¸´æ—¶æ–‡ä»¶

### è§£å†³æ–¹æ¡ˆ

1. **å‘½åè§„èŒƒ**ï¼šä½¿ç”¨ `deletable` æ ‡è¯†ç¬¦æ˜ç¡®æ ‡è®°ä¸´æ—¶æ–‡ä»¶
2. **å…ƒæ•°æ®æ³¨é‡Š**ï¼šåœ¨æ–‡ä»¶ä¸­æ³¨æ˜ç”¨é€”ã€ä¾èµ–ã€æ˜¯å¦å¯åˆ é™¤
3. **è‡ªåŠ¨æ£€æŸ¥**ï¼šPre-commit è‡ªåŠ¨éªŒè¯å…ƒæ•°æ®å®Œæ•´æ€§
4. **å·¥å…·æ”¯æŒ**ï¼šæä¾›æ‰«æå’Œæ¸…ç†å·¥å…·

---

## ğŸ·ï¸ æ–‡ä»¶å‘½åè§„èŒƒ

### å¯åˆ é™¤æ–‡ä»¶å‘½å

å¿…é¡»åœ¨æ–‡ä»¶åä¸­åŒ…å« `deletable` æ ‡è¯†ï¼š

```bash
# æ ¼å¼1ï¼šä¸­é—´æ’å…¥ .deletable. ï¼ˆæ¨èï¼‰
test_feature.deletable.py          # å¯åˆ é™¤çš„Pythonæ–‡ä»¶
debug_log.deletable.txt            # å¯åˆ é™¤çš„æ—¥å¿—æ–‡ä»¶
temp_analysis.deletable.md         # å¯åˆ é™¤çš„ä¸´æ—¶æ–‡æ¡£
mock_data.deletable.json           # å¯åˆ é™¤çš„æµ‹è¯•æ•°æ®

# æ ¼å¼2ï¼šå‰ç¼€ deletable_
deletable_test_script.py           # å¯åˆ é™¤çš„æµ‹è¯•è„šæœ¬
deletable_debug_output.txt         # å¯åˆ é™¤çš„è°ƒè¯•è¾“å‡º

# ç›®å½•çº§åˆ«
temp_deletable/                     # æ•´ä¸ªç›®å½•æ ‡è®°ä¸ºå¯åˆ é™¤
  â”œâ”€â”€ analysis.py
  â””â”€â”€ data.json
```

### æ°¸ä¹…æ–‡ä»¶å‘½å

æ­£å¸¸å‘½åï¼Œä¸åŒ…å« `deletable`ï¼š

```bash
user_service.py                    # ä¸šåŠ¡ä»£ç 
config.json                        # é…ç½®æ–‡ä»¶
README.md                          # æ–‡æ¡£
```

---

## ğŸ“ å…ƒæ•°æ®æ³¨é‡Šè§„èŒƒ

### Python æ–‡ä»¶

```python
#!/usr/bin/env python3
"""
@deletable: true
@purpose: ä¸´æ—¶æµ‹è¯•è„šæœ¬ï¼Œç”¨äºéªŒè¯ç”¨æˆ·è®¤è¯æµç¨‹
@created: 2025-10-20
@author: AI Assistant / Claude
@delete_after: 2025-10-27
@safe_to_delete: yes
@dependencies: none
"""

def test_authentication():
    pass
```

### JavaScript/TypeScript æ–‡ä»¶

```javascript
/**
 * @deletable true
 * @purpose ä¸´æ—¶æµ‹è¯•ï¼ŒéªŒè¯APIå“åº”æ ¼å¼
 * @created 2025-10-20
 * @author AI Assistant
 * @safe_to_delete yes
 * @dependencies none
 */

function testAPI() {
  // test code
}
```

### Shell è„šæœ¬

```bash
#!/bin/bash
# @deletable: true
# @purpose: ä¸€æ¬¡æ€§éƒ¨ç½²è„šæœ¬
# @created: 2025-10-20
# @safe_to_delete: yes
# @dependencies: none

echo "Deploy script"
```

### Markdown æ–‡æ¡£

```markdown
<!--
@deletable: true
@purpose: ä¸´æ—¶è°ƒè¯•è®°å½•
@created: 2025-10-20
@safe_to_delete: yes
@dependencies: none
-->

# Debug Notes

...
```

---

## ğŸ” å…ƒæ•°æ®å­—æ®µè¯´æ˜

### å¿…éœ€å­—æ®µï¼ˆMissing ä¼šå¯¼è‡´ Pre-commit å¤±è´¥ï¼‰

| å­—æ®µ              | è¯´æ˜           | å¯é€‰å€¼                       |
| ----------------- | -------------- | ---------------------------- |
| `@deletable`      | æ˜¯å¦å¯åˆ é™¤     | `true`, `yes`, `1`           |
| `@purpose`        | æ–‡ä»¶ç”¨é€”è¯´æ˜   | è‡ªç”±æ–‡æœ¬                     |
| `@safe_to_delete` | æ˜¯å¦å¯å®‰å…¨åˆ é™¤ | `yes`, `no`, `true`, `false` |

### å¯é€‰å­—æ®µ

| å­—æ®µ            | è¯´æ˜                     | ç¤ºä¾‹                        |
| --------------- | ------------------------ | --------------------------- |
| `@delete_after` | è‡ªåŠ¨åˆ é™¤æ—¥æœŸ             | `2025-10-27`                |
| `@dependencies` | ä¾èµ–è¯´æ˜ï¼ˆå“ªäº›åœ°æ–¹ç”¨åˆ°ï¼‰ | `none`, `scripts/deploy.sh` |
| `@created`      | åˆ›å»ºæ—¥æœŸ                 | `2025-10-20`                |
| `@author`       | ä½œè€…                     | `AI Assistant`, `John Doe`  |

---

## âœ… Pre-commit æ£€æŸ¥è§„åˆ™

### è§¦å‘æ¡ä»¶

å½“æäº¤çš„æ–‡ä»¶ååŒ…å« `deletable` æ—¶ï¼Œè‡ªåŠ¨è§¦å‘å…ƒæ•°æ®æ£€æŸ¥ã€‚

### æ£€æŸ¥å†…å®¹

1. **å¿…éœ€å­—æ®µæ£€æŸ¥**ï¼š

   - ç¼ºå°‘ `@deletable` â†’ âŒ å¤±è´¥
   - ç¼ºå°‘ `@purpose` â†’ âŒ å¤±è´¥
   - ç¼ºå°‘ `@safe_to_delete` â†’ âŒ å¤±è´¥

2. **å­—æ®µå€¼éªŒè¯**ï¼š

   - `@deletable` å¿…é¡»æ˜¯ `true/yes/1`
   - `@safe_to_delete` å¿…é¡»æ˜¯ `yes/no/true/false`

3. **æ–‡ä»¶ç±»å‹æ£€æŸ¥**ï¼š
   - æ”¯æŒï¼š`.py`, `.js`, `.ts`, `.jsx`, `.tsx`, `.sh`, `.bash`, `.md`, `.yml`, `.yaml`, `.json`, `.txt`
   - ä¸æ”¯æŒçš„ç±»å‹ä¼šç»™å‡ºè­¦å‘Š

### æ£€æŸ¥ç¤ºä¾‹

```bash
# æäº¤æ—¶è‡ªåŠ¨æ£€æŸ¥
git commit -m "test: add temp script"

âŒ Deletableæ–‡ä»¶å…ƒæ•°æ®æ£€æŸ¥å¤±è´¥

ğŸš« å‘ç° 2 ä¸ªé”™è¯¯ï¼š

  ğŸ“„ æ–‡ä»¶: test_script.deletable.py
     âŒ ç¼ºå°‘ @deletable

  ğŸ“„ æ–‡ä»¶: debug.deletable.txt
     âŒ ç¼ºå°‘ @purpose

ğŸ’¡ è¯·åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ å…ƒæ•°æ®æ³¨é‡Š
```

---

## ğŸ› ï¸ å·¥å…·ä½¿ç”¨

### 1. æ‰«æå·¥å…· - scan_deletable_files.py

æ‰«æé¡¹ç›®ä¸­çš„æ‰€æœ‰ deletable æ–‡ä»¶å¹¶ç”ŸæˆæŠ¥å‘Šã€‚

```bash
# æ‰«æå½“å‰ç›®å½•
python scripts/scan_deletable_files.py

# æ‰«ææŒ‡å®šç›®å½•
python scripts/scan_deletable_files.py --dir ./backend

# è¾“å‡ºJSONæ ¼å¼
python scripts/scan_deletable_files.py --format json

# ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶
python scripts/scan_deletable_files.py --output report.json
```

**ç¤ºä¾‹è¾“å‡º**ï¼š

```
ğŸ” æ‰«æé¡¹ç›®ç›®å½•: /path/to/project

===============================================================================
ğŸ“Š Deletable æ–‡ä»¶æ‰«ææŠ¥å‘Š
===============================================================================

ğŸ“ æ‰«æç›®å½•: /path/to/project
ğŸ“ å‘ç°æ–‡ä»¶: 5 ä¸ª

ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯ï¼š
  âœ… æœ‰å®Œæ•´å…ƒæ•°æ®: 3 ä¸ª
  âŒ ç¼ºå°‘å…ƒæ•°æ®: 2 ä¸ª
  â° å·²è¿‡æœŸ: 1 ä¸ª
  ğŸ—‘ï¸  å¯å®‰å…¨åˆ é™¤: 3 ä¸ª
  ğŸ’¾ æ€»å¤§å°: 45.67 KB
```

### 2. æ¸…ç†å·¥å…· - cleanup_deletable_files.py

è‡ªåŠ¨åˆ é™¤è¿‡æœŸæˆ–æ ‡è®°ä¸ºå¯åˆ é™¤çš„æ–‡ä»¶ã€‚

```bash
# æ¨¡æ‹Ÿè¿è¡Œï¼ˆé»˜è®¤ï¼Œä¸å®é™…åˆ é™¤ï¼‰
python scripts/cleanup_deletable_files.py

# å®é™…åˆ é™¤
python scripts/cleanup_deletable_files.py --execute

# æ¸…ç†ç©ºç›®å½•
python scripts/cleanup_deletable_files.py --execute --clean-empty-dirs

# æ¸…ç†æŒ‡å®šç›®å½•
python scripts/cleanup_deletable_files.py --dir ./temp --execute
```

**ç¤ºä¾‹è¾“å‡º**ï¼š

```
ğŸ” æ‰«æç›®å½•: /path/to/project

===============================================================================
ğŸ” æ¨¡æ‹Ÿè¿è¡Œ - ä»¥ä¸‹æ–‡ä»¶å°†è¢«åˆ é™¤ (3 ä¸ª)ï¼š
===============================================================================

  ğŸ“„ scripts/test_auth.deletable.py
     ğŸ“ å¤§å°: 5.23 KB
     ğŸ’¡ åŸå› : å·²è¿‡æœŸï¼ˆåˆ é™¤æ—¥æœŸ: 2025-10-19ï¼‰
     ğŸ” [æ¨¡æ‹Ÿ] å°†ä¼šåˆ é™¤

  ğŸ“„ debug_log.deletable.txt
     ğŸ“ å¤§å°: 12.45 KB
     ğŸ’¡ åŸå› : æ ‡è®°ä¸ºå¯å®‰å…¨åˆ é™¤
     ğŸ” [æ¨¡æ‹Ÿ] å°†ä¼šåˆ é™¤

===============================================================================
ğŸ“Š æ¸…ç†ç»Ÿè®¡ï¼š
===============================================================================
  ğŸ“ å¾…åˆ é™¤: 3 ä¸ªæ–‡ä»¶
  ğŸ’¾ æ€»å¤§å°: 23.45 KB

ğŸ’¡ è¿™æ˜¯æ¨¡æ‹Ÿè¿è¡Œï¼Œæ–‡ä»¶æœªè¢«å®é™…åˆ é™¤
ğŸ’¡ ä½¿ç”¨ --execute å‚æ•°æ‰§è¡Œå®é™…åˆ é™¤æ“ä½œ
```

### 3. å…ƒæ•°æ®æ£€æŸ¥ - file_metadata_checker.py

Pre-commit è‡ªåŠ¨è°ƒç”¨ï¼Œä¹Ÿå¯æ‰‹åŠ¨è¿è¡Œã€‚

```bash
# æ£€æŸ¥å•ä¸ªæ–‡ä»¶
python scripts/file_metadata_checker.py test.deletable.py

# æ£€æŸ¥å¤šä¸ªæ–‡ä»¶
python scripts/file_metadata_checker.py *.deletable.py
```

---

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹

### åˆ›å»ºä¸´æ—¶æ–‡ä»¶

```bash
# 1. ä½¿ç”¨ deletable å‘½å
touch test_feature.deletable.py

# 2. æ·»åŠ å…ƒæ•°æ®æ³¨é‡Š
cat > test_feature.deletable.py << 'EOF'
"""
@deletable: true
@purpose: æµ‹è¯•ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
@safe_to_delete: yes
@delete_after: 2025-10-27
@dependencies: none
"""

def test_registration():
    pass
EOF

# 3. æäº¤ï¼ˆä¼šè‡ªåŠ¨æ£€æŸ¥ï¼‰
git add test_feature.deletable.py
git commit -m "test: add registration test"
```

### å®šæœŸæ¸…ç†

```bash
# 1. æ‰«æé¡¹ç›®
python scripts/scan_deletable_files.py

# 2. æ¨¡æ‹Ÿæ¸…ç†ï¼ˆæŸ¥çœ‹å°†è¢«åˆ é™¤çš„æ–‡ä»¶ï¼‰
python scripts/cleanup_deletable_files.py

# 3. ç¡®è®¤åæ‰§è¡Œæ¸…ç†
python scripts/cleanup_deletable_files.py --execute

# 4. æäº¤æ¸…ç†ç»“æœ
git add -u
git commit -m "chore: cleanup expired deletable files"
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### DO âœ…

1. **å§‹ç»ˆæ·»åŠ å…ƒæ•°æ®**ï¼šåˆ›å»º deletable æ–‡ä»¶æ—¶ç«‹å³æ·»åŠ å…ƒæ•°æ®
2. **è®¾ç½®åˆ é™¤æ—¥æœŸ**ï¼šå¯¹ä¸´æ—¶æ–‡ä»¶è®¾ç½® `@delete_after`
3. **è¯´æ˜ä¾èµ–å…³ç³»**ï¼šå¦‚æœå…¶ä»–æ–‡ä»¶ä¾èµ–æ­¤æ–‡ä»¶ï¼Œåœ¨ `@dependencies` ä¸­è¯´æ˜
4. **å®šæœŸæ‰«æ**ï¼šæ¯å‘¨è¿è¡Œä¸€æ¬¡æ‰«æå·¥å…·
5. **è°¨æ…æ¸…ç†**ï¼šå…ˆæ¨¡æ‹Ÿè¿è¡Œï¼Œç¡®è®¤æ— è¯¯åå†æ‰§è¡Œ

### DON'T âŒ

1. **ä¸è¦è·³è¿‡å…ƒæ•°æ®**ï¼šå³ä½¿æ˜¯"ä¸´æ—¶"æ–‡ä»¶ä¹Ÿè¦æ·»åŠ 
2. **ä¸è¦éšæ„æ ‡è®°**ï¼šä¸ç¡®å®šæ˜¯å¦å¯åˆ é™¤æ—¶è®¾ç½® `@safe_to_delete: no`
3. **ä¸è¦ç›´æ¥åˆ é™¤**ï¼šä½¿ç”¨æ¸…ç†å·¥å…·ï¼Œæœ‰æ—¥å¿—å¯è¿½æº¯
4. **ä¸è¦å¿½ç•¥è­¦å‘Š**ï¼šPre-commit å¤±è´¥æ—¶ä¿®å¤ï¼Œä¸è¦ç»•è¿‡
5. **ä¸è¦æ»¥ç”¨**ï¼šçœŸæ­£çš„é¡¹ç›®æ–‡ä»¶ä¸è¦æ·»åŠ  deletable æ ‡è¯†

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### Pre-commit æ£€æŸ¥å¤±è´¥

**é—®é¢˜**ï¼šæäº¤æ—¶æŠ¥é”™ç¼ºå°‘å…ƒæ•°æ®

**è§£å†³**ï¼š

1. æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å« `deletable`
2. åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ å…ƒæ•°æ®æ³¨é‡Š
3. ç¡®ä¿å¿…éœ€å­—æ®µé½å…¨
4. é‡æ–°æäº¤

### å·¥å…·æ— æ³•è¯†åˆ«æ–‡ä»¶ç±»å‹

**é—®é¢˜**ï¼šä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹

**è§£å†³**ï¼š

1. æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦æ”¯æŒ
2. å¦‚æœæ˜¯ç‰¹æ®Šç±»å‹ï¼Œå¯ä»¥æ issue è¯·æ±‚æ”¯æŒ
3. ä¸´æ—¶æ–¹æ¡ˆï¼šä½¿ç”¨æ–‡æœ¬æ–‡ä»¶æ³¨é‡Šæ ¼å¼ `#`

### æ¸…ç†å·¥å…·è¯¯åˆ æ–‡ä»¶

**é—®é¢˜**ï¼šé‡è¦æ–‡ä»¶è¢«åˆ é™¤

**è§£å†³**ï¼š

1. æ°¸è¿œå…ˆç”¨ `--execute` å‰çš„æ¨¡æ‹Ÿè¿è¡Œ
2. æ£€æŸ¥ `@safe_to_delete` è®¾ç½®
3. ä½¿ç”¨ Git æ¢å¤ï¼š`git checkout -- <file>`

---

## ğŸ“š æ‰©å±•é˜…è¯»

- [Pre-commit é…ç½®](.code-quality-config.yaml)
- [é¡¹ç›®å¼€å‘è§„èŒƒ](CONTRIBUTING.md)
- [Git ä¿æŠ¤æœºåˆ¶](GIT_PROTECTION_SCENARIOS_ANALYSIS.md)

---

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’æŸ¥éƒ¨åˆ†
2. è¿è¡Œ `python scripts/scan_deletable_files.py --help`
3. æŸ¥çœ‹å·¥å…·è„šæœ¬ä¸­çš„è¯¦ç»†æ³¨é‡Š
4. åœ¨é¡¹ç›®ä¸­æ issue

---

**æœ€åæ›´æ–°**: 2025-10-20
**ç»´æŠ¤è€…**: Claude Sonnet 4.5

# V4æ¶æ„å®æ–½è®¡åˆ’

> **åˆ›å»ºæ—¥æœŸ**: 2025-11-30
> **ç›®æ ‡**: åœ¨ç°æœ‰é¡¹ç›®åŸºç¡€ä¸Šå®æ–½V4æ¶æ„ï¼Œé¿å…å†—ä½™æ–‡ä»¶

## ğŸ“‹ å½“å‰é¡¹ç›®å·²æœ‰ç»„ä»¶

### âœ… å·²å­˜åœ¨ï¼ˆæ— éœ€åˆ›å»ºï¼‰

- âœ… Task-Master: `.taskmaster/` å·²é…ç½®
- âœ… Pre-commit: `.husky/` å·²é…ç½®ï¼ˆV4è¦æ±‚`.githooks/`ï¼Œéœ€è¦è¿ç§»ï¼‰
- âœ… CI/CD: `.github/workflows/` å·²é…ç½®
- âœ… Docker: `docker-compose.yml` å·²é…ç½®
- âœ… åç«¯æµ‹è¯•: `backend/tests/unit/`, `backend/tests/integration/` å·²å­˜åœ¨
- âœ… E2Eæµ‹è¯•: `e2e/tests/` å·²å­˜åœ¨
- âœ… æ–‡æ¡£ç›®å½•: `docs/00_product/`, `docs/01_guideline/` å·²å­˜åœ¨

## ğŸ¯ éœ€è¦åˆ›å»ºçš„å†…å®¹

### é˜¶æ®µ1: ç›®å½•ç»“æ„ï¼ˆä»…ç¼ºå¤±éƒ¨åˆ†ï¼‰

#### 1.1 PRDéœ€æ±‚æ–‡æ¡£ç›®å½•

```bash
docs/00_product/requirements/  # éœ€è¦åˆ›å»º
```

#### 1.2 APIå¥‘çº¦ç›®å½•

```bash
docs/01_guideline/api-contracts/  # éœ€è¦åˆ›å»º
```

#### 1.3 æµ‹è¯•ç›®å½•è¡¥å……

```bash
backend/tests/regression/  # éœ€è¦åˆ›å»º
backend/tests/fixtures/   # éœ€è¦åˆ›å»º
e2e/tests/smoke/          # éœ€è¦åˆ›å»º
e2e/tests/regression/     # éœ€è¦åˆ›å»º
e2e/tests/performance/   # éœ€è¦åˆ›å»º
```

#### 1.4 åˆè§„å¼•æ“ç›®å½•

```bash
.compliance/              # éœ€è¦åˆ›å»ºï¼ˆå…¨æ–°ï¼‰
â”œâ”€â”€ rules/                # è§„åˆ™å®šä¹‰
â”œâ”€â”€ checkers/             # æ£€æŸ¥å™¨æ’ä»¶
â””â”€â”€ config.yaml          # å…¨å±€é…ç½®
```

#### 1.5 è„šæœ¬ç›®å½•è¡¥å……

```bash
scripts/task-master/      # éœ€è¦åˆ›å»ºï¼ˆTask-Masteré€‚é…å±‚ï¼‰
scripts/compliance/       # éœ€è¦åˆ›å»ºï¼ˆåˆè§„æ£€æŸ¥è„šæœ¬ï¼‰
scripts/setup/           # éœ€è¦åˆ›å»ºï¼ˆå®‰è£…è„šæœ¬ï¼‰
```

#### 1.6 Git Hooksè¿ç§»

```bash
.githooks/                # éœ€è¦åˆ›å»ºï¼ˆä».huskyè¿ç§»æˆ–å…±å­˜ï¼‰
```

## ğŸ“ åˆ†æ­¥å®æ–½è®¡åˆ’

### é˜¶æ®µ1: åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„ï¼ˆ5åˆ†é’Ÿï¼‰

**ç›®æ ‡**: åˆ›å»ºæ‰€æœ‰å¿…éœ€çš„ç›®å½•ï¼Œä¸åˆ›å»ºæ–‡ä»¶

**æ­¥éª¤**:

1. åˆ›å»ºPRDéœ€æ±‚æ–‡æ¡£ç›®å½•
2. åˆ›å»ºAPIå¥‘çº¦ç›®å½•
3. è¡¥å……æµ‹è¯•ç›®å½•
4. åˆ›å»ºåˆè§„å¼•æ“ç›®å½•
5. åˆ›å»ºè„šæœ¬ç›®å½•

### é˜¶æ®µ2: é…ç½®åˆè§„å¼•æ“ï¼ˆ15åˆ†é’Ÿï¼‰

**ç›®æ ‡**: åˆ›å»ºåˆè§„å¼•æ“æ ¸å¿ƒæ–‡ä»¶å’Œè§„åˆ™

**æ­¥éª¤**:

1. åˆ›å»º`.compliance/config.yaml`
2. åˆ›å»ºè§„åˆ™æ–‡ä»¶ï¼ˆprd.yaml, test.yaml, code.yamlç­‰ï¼‰
3. åˆ›å»ºæ£€æŸ¥å™¨æ’ä»¶ï¼ˆprd_checker.pyç­‰ï¼‰
4. åˆ›å»ºå¼•æ“æ ¸å¿ƒï¼ˆengine.py, runner.pyï¼‰

### é˜¶æ®µ3: Task-Masteré€‚é…å±‚ï¼ˆ10åˆ†é’Ÿï¼‰

**ç›®æ ‡**: åˆ›å»ºTask-Masteré€‚é…å±‚ï¼Œå®ç°ä¸‰å±‚ä»»åŠ¡ç®¡ç†

**æ­¥éª¤**:

1. åˆ›å»º`scripts/task-master/adapter.py`
2. åˆ›å»º`scripts/task-master/sync_status.py`
3. é›†æˆåˆ°ç°æœ‰å·¥ä½œæµ

### é˜¶æ®µ4: Git Hooksé›†æˆï¼ˆ10åˆ†é’Ÿï¼‰

**ç›®æ ‡**: å°†åˆè§„å¼•æ“é›†æˆåˆ°Git Hooks

**æ­¥éª¤**:

1. åœ¨`.husky/pre-commit`ä¸­è°ƒç”¨åˆè§„å¼•æ“
2. æ›´æ–°`.husky/commit-msg`æ”¯æŒREQ-IDæ ¼å¼
3. æ›´æ–°`.husky/post-commit`æ·»åŠ å®¡è®¡æ—¥å¿—

### é˜¶æ®µ5: CI/CDé›†æˆï¼ˆ10åˆ†é’Ÿï¼‰

**ç›®æ ‡**: åœ¨CI/CDä¸­éªŒè¯åˆè§„è§„åˆ™

**æ­¥éª¤**:

1. åœ¨ç°æœ‰workflowä¸­æ·»åŠ åˆè§„æ£€æŸ¥
2. æ·»åŠ è¿½æº¯é“¾éªŒè¯
3. æ·»åŠ è‡ªåŠ¨å›æ»šæœºåˆ¶

### é˜¶æ®µ6: åˆ›å»ºç¤ºä¾‹å’Œæ–‡æ¡£ï¼ˆ5åˆ†é’Ÿï¼‰

**ç›®æ ‡**: åˆ›å»ºç¤ºä¾‹PRDå’Œé…ç½®è¯´æ˜

**æ­¥éª¤**:

1. åˆ›å»ºç¤ºä¾‹PRDæ¨¡æ¿
2. åˆ›å»ºä½¿ç”¨æŒ‡å—
3. éªŒè¯å®‰è£…

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦†ç›–ç°æœ‰é…ç½®**: æ‰€æœ‰æ–°é…ç½®ä¸ç°æœ‰é…ç½®å…±å­˜
2. **æ¸è¿›å¼å¯ç”¨**: å…ˆåˆ›å»ºç›®å½•å’Œæ–‡ä»¶ï¼Œå†é€æ­¥å¯ç”¨è§„åˆ™
3. **å‘åå…¼å®¹**: ç¡®ä¿ç°æœ‰å·¥ä½œæµä¸å—å½±å“
4. **æµ‹è¯•éªŒè¯**: æ¯ä¸ªé˜¶æ®µå®Œæˆåè¿›è¡ŒéªŒè¯

## ğŸ”„ ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆ

### Pre-commité›†æˆ

- ç°æœ‰: `.husky/pre-commit` å·²æœ‰å®Œæ•´æ£€æŸ¥
- æ–°å¢: åœ¨ç°æœ‰æ£€æŸ¥åæ·»åŠ åˆè§„å¼•æ“æ£€æŸ¥
- æ–¹å¼: åœ¨`.husky/pre-commit`æœ«å°¾è°ƒç”¨`.compliance/runner.py`

### CI/CDé›†æˆ

- ç°æœ‰: `.github/workflows/` å·²æœ‰å®Œæ•´CI/CD
- æ–°å¢: åœ¨ç°æœ‰workflowä¸­æ·»åŠ åˆè§„éªŒè¯æ­¥éª¤
- æ–¹å¼: æ·»åŠ æ–°çš„jobæˆ–stepï¼Œä¸ä¿®æ”¹ç°æœ‰é€»è¾‘

### Task-Masteré›†æˆ

- ç°æœ‰: `.taskmaster/` å·²é…ç½®
- æ–°å¢: é€‚é…å±‚å°†Task-Masterè¾“å‡ºè½¬æ¢ä¸ºä¸‰å±‚ç»“æ„
- æ–¹å¼: åˆ›å»ºé€‚é…è„šæœ¬ï¼Œä¸ä¿®æ”¹Task-Masteré…ç½®

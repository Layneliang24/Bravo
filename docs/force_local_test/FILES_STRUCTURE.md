# å¼ºåˆ¶æœ¬åœ°æµ‹è¯•ç³»ç»Ÿ - æ–‡ä»¶ç»„æˆè¯´æ˜

## ğŸ“ å®Œæ•´æ–‡ä»¶ç»“æ„

```
Bravo/
â”œâ”€â”€ ğŸ› ï¸ æ ¸å¿ƒè„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ git-guard.sh                      # [æ ¸å¿ƒ] Gitå‘½ä»¤æ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ local_test_passport.py            # [æ ¸å¿ƒ] é€šè¡Œè¯ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ one_click_test.sh                 # [æ ¸å¿ƒ] ä¸€é”®æµ‹è¯•è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ setup_cursor_protection.sh        # [éƒ¨ç½²] è‡ªåŠ¨å®‰è£…è„šæœ¬
â”‚   â”‚   â””â”€â”€ (ç°æœ‰è„šæœ¬...)                      # é¡¹ç›®åŸæœ‰è„šæœ¬
â”‚   â”‚
â”œâ”€â”€ ğŸ¯ ä¾¿æ·å‘½ä»¤æ–‡ä»¶
â”‚   â”œâ”€â”€ test                                  # ä¾¿æ·æµ‹è¯•å‘½ä»¤
â”‚   â”œâ”€â”€ passport                              # ä¾¿æ·é€šè¡Œè¯å‘½ä»¤
â”‚   â”œâ”€â”€ safe-push                             # ä¾¿æ·æ¨é€å‘½ä»¤
â”‚   â””â”€â”€ Makefile                              # Makeå‘½ä»¤é›†æˆ
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .vscode/
â”‚   â”‚   â”œâ”€â”€ tasks.json                        # Cursor/VS Codeä»»åŠ¡é…ç½®
â”‚   â”‚   â””â”€â”€ settings.json                     # ç¼–è¾‘å™¨è®¾ç½®
â”‚   â””â”€â”€ .git/
â”‚       â””â”€â”€ local_test_passport.json          # [ç”Ÿæˆ] é€šè¡Œè¯æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£æ–‡ä»¶
â”‚   â”œâ”€â”€ docs/
â”‚   â”‚   â”œâ”€â”€ CURSOR_PROTECTION_GUIDE.md        # ç”¨æˆ·ä½¿ç”¨æŒ‡å—
â”‚   â”‚   â””â”€â”€ force_local_test/                 # è®¾è®¡æ–‡æ¡£ç›®å½•
â”‚   â”‚       â”œâ”€â”€ README.md                     # ç³»ç»Ÿæ¦‚è§ˆ
â”‚   â”‚       â”œâ”€â”€ ARCHITECTURE.md               # æ¶æ„è®¾è®¡
â”‚   â”‚       â”œâ”€â”€ IMPLEMENTATION.md             # æŠ€æœ¯å®ç°
â”‚   â”‚       â”œâ”€â”€ FILES_STRUCTURE.md            # æœ¬æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ CROSS_WINDOWS_DEPLOYMENT.md   # è·¨å¹³å°éƒ¨ç½²
â”‚   â”‚       â”œâ”€â”€ DEBUG_GUIDE.md                # è°ƒè¯•æŒ‡å—
â”‚   â”‚       â””â”€â”€ FAQ.md                        # å¸¸è§é—®é¢˜
â”‚   â”‚
â””â”€â”€ ğŸ“ æ—¥å¿—æ–‡ä»¶
    â””â”€â”€ logs/
        â”œâ”€â”€ git-no-verify-attempts.log        # Gitæ‹¦æˆªæ—¥å¿—
        â””â”€â”€ local_test_passport.log           # é€šè¡Œè¯æ“ä½œæ—¥å¿—
```

## ğŸ”§ æ ¸å¿ƒè„šæœ¬æ–‡ä»¶è¯¦è§£

### 1. `scripts/git-guard.sh` [Gitå‘½ä»¤æ‹¦æˆªå™¨]

**ä½œç”¨**: ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œæ‹¦æˆªæ‰€æœ‰Gitå‘½ä»¤å¹¶éªŒè¯æ¨é€æƒé™

**æ ¸å¿ƒåŠŸèƒ½**:

```bash
# ä¸»è¦æ£€æŸ¥é¡¹ç›®
â”œâ”€â”€ é€šè¡Œè¯éªŒè¯ (æ–°å¢)
â”œâ”€â”€ --no-verify æ‹¦æˆª
â”œâ”€â”€ å¼ºåˆ¶æ¨é€æ‹¦æˆª
â”œâ”€â”€ ä¿æŠ¤åˆ†æ”¯æ£€æŸ¥
â”œâ”€â”€ æ•°æ®ä¸¢å¤±æ“ä½œé˜²æŠ¤
â””â”€â”€ å®¿ä¸»æœºä¾èµ–å®‰è£…æ‹¦æˆª
```

**å…³é”®ä»£ç æ®µ**:

```bash
# é€šè¡Œè¯éªŒè¯å‡½æ•°
check_local_test_passport() {
    local passport_file="$PROJECT_ROOT/.git/local_test_passport.json"
    # éªŒè¯é€šè¡Œè¯æœ‰æ•ˆæ€§
}

# æ¨é€æ‹¦æˆªé€»è¾‘
if [[ "$1" == "push" ]]; then
    if ! check_local_test_passport; then
        show_passport_warning "æ¨é€åˆ°è¿œç¨‹ä»“åº“" "git $*"
    fi
fi
```

**è¾“å…¥**: Gitå‘½ä»¤å‚æ•° (`$@`)
**è¾“å‡º**: å…è®¸æ‰§è¡Œæˆ–æ‹¦æˆªå¹¶æ˜¾ç¤ºè­¦å‘Š
**æ—¥å¿—**: `logs/git-no-verify-attempts.log`

---

### 2. `scripts/local_test_passport.py` [é€šè¡Œè¯ç”Ÿæˆå™¨]

**ä½œç”¨**: æ‰§è¡Œå››å±‚éªŒè¯å¹¶ç”Ÿæˆ/ç®¡ç†æ¨é€é€šè¡Œè¯

**æ ¸å¿ƒåŠŸèƒ½**:

```python
class LocalTestPassport:
    â”œâ”€â”€ run_act_validation()           # Layer 1: è¯­æ³•éªŒè¯
    â”œâ”€â”€ run_docker_validation()       # Layer 2: ç¯å¢ƒéªŒè¯
    â”œâ”€â”€ run_quick_tests()             # Layer 3: åŠŸèƒ½éªŒè¯
    â”œâ”€â”€ run_environment_diff_check()  # Layer 4: å·®å¼‚éªŒè¯
    â”œâ”€â”€ generate_passport()           # é€šè¡Œè¯ç”Ÿæˆ
    â””â”€â”€ check_existing_passport()     # é€šè¡Œè¯éªŒè¯
```

**å‘½ä»¤è¡Œæ¥å£**:

```bash
python local_test_passport.py              # è¿è¡Œå®Œæ•´éªŒè¯
python local_test_passport.py --check      # æ£€æŸ¥é€šè¡Œè¯çŠ¶æ€
python local_test_passport.py --force      # å¼ºåˆ¶é‡æ–°ç”Ÿæˆ
```

**è¾“å…¥**: å‘½ä»¤è¡Œå‚æ•°ï¼Œå½“å‰GitçŠ¶æ€
**è¾“å‡º**: é€šè¡Œè¯æ–‡ä»¶ `.git/local_test_passport.json`
**æ—¥å¿—**: `logs/local_test_passport.log`

---

### 3. `scripts/one_click_test.sh` [ä¸€é”®æµ‹è¯•è„šæœ¬]

**ä½œç”¨**: ç”¨æˆ·å‹å¥½çš„æµ‹è¯•å…¥å£ï¼Œæ•´åˆå¤šç§éªŒè¯å·¥å…·

**æ ¸å¿ƒåŠŸèƒ½**:

```bash
# æµ‹è¯•æ¨¡å¼
â”œâ”€â”€ --quick    # å¿«é€Ÿæµ‹è¯•(1-2åˆ†é’Ÿ)
â”œâ”€â”€ --full     # å®Œæ•´æµ‹è¯•(5-10åˆ†é’Ÿ)
â”œâ”€â”€ --check    # æ£€æŸ¥é€šè¡Œè¯çŠ¶æ€
â”œâ”€â”€ --act-only # ä»…è¯­æ³•éªŒè¯
â””â”€â”€ --docker-only # ä»…ç¯å¢ƒéªŒè¯
```

**æ‰§è¡Œæµç¨‹**:

```bash
æ£€æŸ¥å‰ç½®æ¡ä»¶ â†’ é€‰æ‹©æ¨¡å¼ â†’ è¿è¡ŒéªŒè¯ â†’ ç”Ÿæˆé€šè¡Œè¯ â†’ æ˜¾ç¤ºç»“æœ
```

**è¾“å…¥**: æ¨¡å¼å‚æ•°
**è¾“å‡º**: éªŒè¯ç»“æœå’Œé€šè¡Œè¯çŠ¶æ€
**è°ƒç”¨**: `local_test_passport.py`, DockeræœåŠ¡

---

### 4. `scripts/setup_cursor_protection.sh` [è‡ªåŠ¨å®‰è£…è„šæœ¬]

**ä½œç”¨**: ä¸€é”®è®¾ç½®æ•´ä¸ªä¿æŠ¤ç³»ç»Ÿï¼Œé…ç½®æ‰€æœ‰å¿…è¦ç»„ä»¶

**å®‰è£…æ­¥éª¤**:

```bash
1. setup_git_guard()           # è®¾ç½®Gitæ‹¦æˆª
2. create_convenience_commands() # åˆ›å»ºä¾¿æ·å‘½ä»¤
3. update_makefile()           # æ›´æ–°Makefile
4. create_cursor_config()      # åˆ›å»ºCursoré…ç½®
5. create_usage_guide()        # ç”Ÿæˆä½¿ç”¨æŒ‡å—
6. test_protection_system()    # æµ‹è¯•ç³»ç»Ÿ
```

**ç”Ÿæˆæ–‡ä»¶**:

- `test`, `passport`, `safe-push` ä¾¿æ·å‘½ä»¤
- `.vscode/tasks.json` Cursorä»»åŠ¡é…ç½®
- `Makefile` æ›´æ–°ï¼ˆæ·»åŠ æµ‹è¯•å‘½ä»¤ï¼‰
- `docs/CURSOR_PROTECTION_GUIDE.md` ä½¿ç”¨æŒ‡å—

---

## ğŸ¯ ä¾¿æ·å‘½ä»¤æ–‡ä»¶è¯¦è§£

### 1. `test` [ä¾¿æ·æµ‹è¯•å‘½ä»¤]

```bash
#!/bin/bash
# ç›´æ¥è°ƒç”¨ä¸€é”®æµ‹è¯•è„šæœ¬
bash scripts/one_click_test.sh "$@"
```

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
./test              # å®Œæ•´æµ‹è¯•
./test --quick      # å¿«é€Ÿæµ‹è¯•
./test --check      # æ£€æŸ¥çŠ¶æ€
```

---

### 2. `passport` [ä¾¿æ·é€šè¡Œè¯å‘½ä»¤]

```bash
#!/bin/bash
# è·¨å¹³å°Pythonè°ƒç”¨
if command -v python3 &> /dev/null; then
    python3 scripts/local_test_passport.py "$@"
else
    python scripts/local_test_passport.py "$@"
fi
```

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
./passport --check  # æ£€æŸ¥é€šè¡Œè¯
./passport --force  # å¼ºåˆ¶é‡æ–°ç”Ÿæˆ
```

---

### 3. `safe-push` [ä¾¿æ·æ¨é€å‘½ä»¤]

```bash
#!/bin/bash
# å®‰å…¨æ¨é€å‘½ä»¤ï¼Œè‡ªåŠ¨éªŒè¯é€šè¡Œè¯
bash scripts/git-guard.sh push "$@"
```

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
./safe-push origin feature/branch
```

---

### 4. `Makefile` [Makeå‘½ä»¤é›†æˆ]

**æ–°å¢çš„ç›®æ ‡**:

```makefile
# Cursor AIä¿æŠ¤ç³»ç»Ÿç›¸å…³å‘½ä»¤
test:           # è¿è¡Œæœ¬åœ°æµ‹è¯•
test-quick:     # å¿«é€Ÿæµ‹è¯•
test-check:     # æ£€æŸ¥é€šè¡Œè¯çŠ¶æ€
passport:       # æ£€æŸ¥é€šè¡Œè¯
passport-force: # å¼ºåˆ¶é‡æ–°ç”Ÿæˆ
safe-push:      # å®‰å…¨æ¨é€
setup-protection: # è®¾ç½®ä¿æŠ¤ç³»ç»Ÿ
```

## âš™ï¸ é…ç½®æ–‡ä»¶è¯¦è§£

### 1. `.vscode/tasks.json` [Cursorä»»åŠ¡é…ç½®]

**ä»»åŠ¡åˆ—è¡¨**:

```json
{
  "tasks": [
    {
      "label": "ğŸ§ª æœ¬åœ°æµ‹è¯•ï¼ˆç”Ÿæˆæ¨é€é€šè¡Œè¯ï¼‰",
      "command": "bash",
      "args": ["scripts/one_click_test.sh"]
    },
    {
      "label": "âš¡ å¿«é€Ÿæµ‹è¯•",
      "args": ["scripts/one_click_test.sh", "--quick"]
    },
    {
      "label": "ğŸ« æ£€æŸ¥é€šè¡Œè¯çŠ¶æ€",
      "command": "python3",
      "args": ["scripts/local_test_passport.py", "--check"]
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**: `Ctrl+Shift+P` â†’ `Tasks: Run Task` â†’ é€‰æ‹©ä»»åŠ¡

---

### 2. `.git/local_test_passport.json` [é€šè¡Œè¯æ–‡ä»¶]

**æ•°æ®ç»“æ„**:

```json
{
  "version": "1.0",
  "generated_at": "2024-12-07T10:30:00.000000",
  "expires_at": "2024-12-07T11:30:00.000000",
  "git_hash": "a1b2c3d4e5f6",
  "validation_layers": {
    "act_syntax": true,
    "docker_environment": true,
    "functional_tests": true,
    "environment_diff": true
  },
  "valid_for_push": true,
  "validation_signature": "sha256_hash_32chars"
}
```

**ç‰¹æ€§**:

- 1å°æ—¶æœ‰æ•ˆæœŸ
- GitçŠ¶æ€ç»‘å®š
- åŠ å¯†ç­¾åéªŒè¯
- åˆ†å±‚éªŒè¯è®°å½•

## ğŸ“š æ–‡æ¡£æ–‡ä»¶è¯¦è§£

### 1. `docs/CURSOR_PROTECTION_GUIDE.md` [ç”¨æˆ·ä½¿ç”¨æŒ‡å—]

**å†…å®¹**:

- å¿«é€Ÿå¼€å§‹æŒ‡å—
- è¯¦ç»†ä½¿ç”¨è¯´æ˜
- æ•…éšœæ’é™¤æ–¹æ³•
- å‘½ä»¤å‚è€ƒæ‰‹å†Œ

**ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…ã€æ–°å›¢é˜Ÿæˆå‘˜

---

### 2. `docs/force_local_test/` [è®¾è®¡æ–‡æ¡£ç›®å½•]

| æ–‡ä»¶å                        | ä½œç”¨           | ç›®æ ‡è¯»è€…         |
| ----------------------------- | -------------- | ---------------- |
| `README.md`                   | ç³»ç»Ÿæ¦‚è§ˆå’Œå¯¼èˆª | æ‰€æœ‰äºº           |
| `ARCHITECTURE.md`             | æ¶æ„è®¾è®¡åŸç†   | æ¶æ„å¸ˆã€ç»´æŠ¤è€…   |
| `IMPLEMENTATION.md`           | æŠ€æœ¯å®ç°ç»†èŠ‚   | å¼€å‘è€…           |
| `FILES_STRUCTURE.md`          | æ–‡ä»¶ç»„æˆè¯´æ˜   | ç»´æŠ¤è€…           |
| `CROSS_WINDOWS_DEPLOYMENT.md` | è·¨å¹³å°éƒ¨ç½²     | è¿ç»´ã€å›¢é˜Ÿè´Ÿè´£äºº |
| `DEBUG_GUIDE.md`              | è°ƒè¯•ç»´æŠ¤æŒ‡å—   | æŠ€æœ¯æ”¯æŒ         |
| `FAQ.md`                      | å¸¸è§é—®é¢˜è§£ç­”   | ç”¨æˆ·             |

## ğŸ“ æ—¥å¿—æ–‡ä»¶è¯¦è§£

### 1. `logs/git-no-verify-attempts.log` [Gitæ‹¦æˆªæ—¥å¿—]

**æ ¼å¼**:

```
[æ—¶é—´æˆ³] | [æ“ä½œç±»å‹] | [è¯¦ç»†ä¿¡æ¯] | [å‘½ä»¤]
```

**è®°å½•å†…å®¹**:

- æ‰€æœ‰è¢«æ‹¦æˆªçš„Gitæ“ä½œ
- é€šè¡Œè¯éªŒè¯ç»“æœ
- ç»•è¿‡å°è¯•è®°å½•
- æ€§èƒ½æŒ‡æ ‡

---

### 2. `logs/local_test_passport.log` [é€šè¡Œè¯æ“ä½œæ—¥å¿—]

**è®°å½•å†…å®¹**:

- é€šè¡Œè¯ç”Ÿæˆè¿‡ç¨‹
- éªŒè¯å±‚æ‰§è¡Œç»“æœ
- é”™è¯¯ä¿¡æ¯å’Œè­¦å‘Š
- æ€§èƒ½ç»Ÿè®¡æ•°æ®

## ğŸ”— æ–‡ä»¶ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   git-guard.sh  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
          â”‚                      â”‚
          â–¼                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚local_test_      â”‚              â”‚
â”‚passport.py      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
          â”‚                      â”‚
          â–¼                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚one_click_test.shâ”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
          â”‚                      â”‚
          â–¼                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   ä¾¿æ·å‘½ä»¤æ–‡ä»¶   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ (test/passport) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ–‡ä»¶ä½¿ç”¨é¢‘ç‡

| æ–‡ä»¶ç±»å‹                     | ä½¿ç”¨é¢‘ç‡    | ç”¨æˆ·ç±»å‹   |
| ---------------------------- | ----------- | ---------- |
| `test`, `passport`           | æ¯æ—¥å¤šæ¬¡    | æ‰€æœ‰å¼€å‘è€… |
| `git-guard.sh`               | æ¯æ¬¡Gitæ“ä½œ | è‡ªåŠ¨æ‰§è¡Œ   |
| `local_test_passport.py`     | æ¯æ¬¡æµ‹è¯•    | è‡ªåŠ¨æ‰§è¡Œ   |
| `setup_cursor_protection.sh` | ä¸€æ¬¡æ€§      | æ–°ç¯å¢ƒå®‰è£… |
| ä½¿ç”¨æŒ‡å—                     | åˆæ¬¡ä½¿ç”¨    | æ–°ç”¨æˆ·     |
| è®¾è®¡æ–‡æ¡£                     | é—®é¢˜æ’æŸ¥æ—¶  | ç»´æŠ¤è€…     |

---

**æ–‡ä»¶ç®¡ç†åŸåˆ™**:

- **æ ¸å¿ƒè„šæœ¬**: ä¿æŒç¨³å®šï¼Œè°¨æ…ä¿®æ”¹
- **ä¾¿æ·å‘½ä»¤**: ç®€å•åŒ…è£…ï¼Œæ˜“äºä½¿ç”¨
- **é…ç½®æ–‡ä»¶**: è‡ªåŠ¨ç”Ÿæˆï¼Œç”¨æˆ·å¯è°ƒæ•´
- **æ–‡æ¡£æ–‡ä»¶**: åŠæ—¶æ›´æ–°ï¼Œä¿æŒåŒæ­¥
- **æ—¥å¿—æ–‡ä»¶**: è‡ªåŠ¨è½®è½¬ï¼Œå®šæœŸæ¸…ç†

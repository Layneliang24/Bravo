# Task-0 REQ-IDæå–é—®é¢˜åˆ†æ

> **æ—¥æœŸ**: 2025-01-02
> **çŠ¶æ€**: ğŸ”§ å·²ä¿®å¤éƒ¨åˆ†é—®é¢˜ï¼Œå¾…éªŒè¯

---

## ğŸ› é—®é¢˜æè¿°

**ç°è±¡**ï¼šTask-0æ£€æŸ¥å™¨æ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜`_extract_req_ids`æ²¡æœ‰æå–åˆ°REQ-ID

**æµ‹è¯•åœºæ™¯**ï¼š

- æ–‡ä»¶ï¼š`backend/apps/test_noprd/views.py`
- å†…å®¹ï¼š`# REQ-ID: REQ-NOPRD-001`
- é¢„æœŸï¼šåº”è¯¥æå–åˆ° `REQ-NOPRD-001` å¹¶æ£€æŸ¥PRDæ˜¯å¦å­˜åœ¨
- å®é™…ï¼šæ²¡æœ‰æå–åˆ°REQ-IDï¼ŒTask-0ä¸æ‰§è¡Œæ£€æŸ¥

---

## ğŸ” é—®é¢˜åˆ†æ

### 1. æ­£åˆ™è¡¨è¾¾å¼é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰

**æ—§æ­£åˆ™**ï¼š`r"REQ-\d{4}(-\d{3})?-[A-Z0-9-]+"`

**é—®é¢˜**ï¼š

- è¦æ±‚ `REQ-` åå¿…é¡»æ˜¯4ä½æ•°å­—ï¼ˆå¹´ä»½ï¼‰
- `REQ-NOPRD-001` ä¸ç¬¦åˆæ ¼å¼ï¼ˆ`NOPRD` æ˜¯å­—æ¯ï¼Œä¸æ˜¯æ•°å­—ï¼‰

**ä¿®å¤**ï¼š

```python
# æ–°æ­£åˆ™ï¼šæ›´å®½æ¾ï¼Œæ”¯æŒå¤šç§æ ¼å¼
req_id_pattern = re.compile(r"REQ-[\w-]+", re.IGNORECASE)
```

**æ”¯æŒçš„æ ¼å¼**ï¼š

- âœ… `REQ-2025-001-user-login` (æ ‡å‡†æ ¼å¼)
- âœ… `REQ-NOPRD-001` (ç®€åŒ–æ ¼å¼)
- âœ… `REQ-2025-001` (å¹´ä»½-åºå·)

### 2. æ–‡ä»¶è·¯å¾„é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰

**é—®é¢˜**ï¼š

- Dockerå®¹å™¨å†…è·¯å¾„å¯èƒ½æ˜¯ `/app/backend/apps/test_noprd/views.py`
- ç›¸å¯¹è·¯å¾„å¯èƒ½æ˜¯ `backend/apps/test_noprd/views.py`
- éœ€è¦åŒæ—¶æ”¯æŒä¸¤ç§è·¯å¾„æ ¼å¼

**ä¿®å¤**ï¼š

```python
# å¤„ç†ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„
path = Path(file)
if not path.is_absolute():
    possible_paths = [
        path,  # å½“å‰ç›®å½•
        Path("/app") / path,  # Dockerå®¹å™¨å†…è·¯å¾„
        Path(".") / path,  # é¡¹ç›®æ ¹ç›®å½•
    ]
else:
    possible_paths = [path]
```

### 3. é€»è¾‘é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰

**é—®é¢˜**ï¼š

- å¦‚æœæ— æ³•æå–REQ-IDï¼Œ`for req_id in req_ids:` ä¸ä¼šæ‰§è¡Œ
- Task-0ä¸æ‰§è¡Œä»»ä½•æ£€æŸ¥ï¼Œä¹Ÿä¸æŠ¥é”™

**ä¿®å¤**ï¼š

```python
# 1. æµ‹è¯•ç›®å½•æ£€æŸ¥ç§»åˆ°REQ-IDæå–ä¹‹å‰ï¼ˆå…¨å±€æ£€æŸ¥ï¼‰
test_dir_result = self._check_test_directories()

# 2. æ— REQ-IDæ—¶ç»™å‡ºè­¦å‘Š
if not req_ids:
    results.append({
        "level": "warning",
        "message": "Task-0æ£€æŸ¥: æ— æ³•ä»ä»£ç æ–‡ä»¶ä¸­æå–REQ-ID",
        ...
    })
    return results

# 3. æœ‰REQ-IDæ—¶æ‰æ‰§è¡ŒPRDå’ŒAPIå¥‘çº¦æ£€æŸ¥
for req_id in req_ids:
    ...
```

---

## âœ… å·²å®æ–½çš„ä¿®å¤

1. **æ”¾å®½æ­£åˆ™è¡¨è¾¾å¼**ï¼šæ”¯æŒå¤šç§REQ-IDæ ¼å¼
2. **è·¯å¾„å¤„ç†**ï¼šæ”¯æŒç›¸å¯¹è·¯å¾„å’ŒDockerå®¹å™¨å†…è·¯å¾„
3. **é€»è¾‘ä¼˜åŒ–**ï¼š
   - æµ‹è¯•ç›®å½•æ£€æŸ¥ï¼ˆSubtask-2ï¼‰å…¨å±€æ‰§è¡Œï¼Œä¸ä¾èµ–REQ-ID
   - æ— REQ-IDæ—¶ç»™å‡ºè­¦å‘Š
   - æœ‰REQ-IDæ—¶æ‰æ‰§è¡ŒPRDå’ŒAPIå¥‘çº¦æ£€æŸ¥
4. **ä¿®å¤f-stringé”™è¯¯**ï¼š`_check_test_directories` æ–¹æ³•

---

## ğŸ”„ å¾…éªŒè¯çš„é—®é¢˜

### é—®é¢˜1: REQ-IDæå–ä»ç„¶å¤±è´¥

**å¯èƒ½åŸå› **ï¼š

1. æ–‡ä»¶è·¯å¾„æ ¼å¼é—®é¢˜ï¼šå®¹å™¨å†…è·¯å¾„ `/app/...` vs ç›¸å¯¹è·¯å¾„ `...`
2. æ–‡ä»¶è¯»å–æƒé™é—®é¢˜
3. æ–‡ä»¶ç¼–ç é—®é¢˜

**è°ƒè¯•å»ºè®®**ï¼š

```python
# åœ¨ _extract_req_ids æ–¹æ³•ä¸­æ·»åŠ è°ƒè¯•æ—¥å¿—
print(f"[DEBUG] å¤„ç†æ–‡ä»¶: {file}")
print(f"[DEBUG] è·¯å¾„å­˜åœ¨: {path.exists()}")
print(f"[DEBUG] æ–‡ä»¶å†…å®¹å‰5è¡Œ: {lines[:5]}")
```

### é—®é¢˜2: Task-0è­¦å‘Šæœªæ˜¾ç¤º

**å¯èƒ½åŸå› **ï¼š

1. è­¦å‘Šçº§åˆ«è¢«å…¶ä»–é”™è¯¯è¦†ç›–
2. å¼•æ“å¤„ç†è­¦å‘Šçš„æ–¹å¼ä¸åŒ
3. è­¦å‘Šè¢«è¿‡æ»¤æ‰

**æ£€æŸ¥ç‚¹**ï¼š

- `.compliance/engine.py` å¦‚ä½•å¤„ç† `warning` çº§åˆ«
- æ˜¯å¦æ‰€æœ‰æ£€æŸ¥å™¨çš„ç»“æœéƒ½è¢«æ˜¾ç¤º

---

## ğŸ“ æµ‹è¯•å»ºè®®

### æµ‹è¯•1: éªŒè¯REQ-IDæå–

```bash
# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo "# REQ-ID: REQ-TEST-001" > backend/apps/test_req_extract.py

# æäº¤å¹¶æŸ¥çœ‹Task-0æ˜¯å¦æå–åˆ°REQ-ID
git add backend/apps/test_req_extract.py
git commit -m "[REQ-TEST-001] æµ‹è¯•REQ-IDæå–"
```

### æµ‹è¯•2: éªŒè¯PRDæ£€æŸ¥

```bash
# 1. åˆ›å»ºä»£ç æ–‡ä»¶ï¼ˆæœ‰REQ-IDï¼Œæ— PRDï¼‰
echo "# REQ-ID: REQ-NOPRD-002" > backend/apps/test_noprd2.py

# 2. æäº¤ï¼ˆåº”è¯¥è¢«Task-0æ‹¦æˆªï¼‰
git add backend/apps/test_noprd2.py
git commit -m "[REQ-NOPRD-002] æµ‹è¯•PRDæ£€æŸ¥"

# é¢„æœŸè¾“å‡ºï¼š
# âŒ Task-0æ£€æŸ¥å¤±è´¥: PRDæ–‡ä»¶ä¸å­˜åœ¨
# æ–‡ä»¶: docs/00_product/requirements/REQ-NOPRD-002/REQ-NOPRD-002.md
```

### æµ‹è¯•3: éªŒè¯æµ‹è¯•ç›®å½•æ£€æŸ¥

```bash
# 1. åˆ é™¤æµ‹è¯•ç›®å½•
rm -rf backend/tests/unit backend/tests/integration e2e/tests

# 2. æäº¤ä»»ä½•ä»£ç æ–‡ä»¶
git add backend/apps/test_noprd/views.py
git commit -m "æµ‹è¯•ç›®å½•æ£€æŸ¥"

# é¢„æœŸè¾“å‡ºï¼š
# âŒ Task-0æ£€æŸ¥å¤±è´¥: æµ‹è¯•ç›®å½•ä¸å­˜åœ¨
# ç¼ºå°‘ç›®å½•: backend/tests/unit/, backend/tests/integration/, e2e/tests/
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **æ·»åŠ è°ƒè¯•æ—¥å¿—**ï¼šåœ¨ `_extract_req_ids` æ–¹æ³•ä¸­æ·»åŠ è¯¦ç»†æ—¥å¿—
2. **éªŒè¯æ–‡ä»¶è¯»å–**ï¼šç¡®è®¤Dockerå®¹å™¨å†…æ–‡ä»¶è·¯å¾„æ ¼å¼
3. **æµ‹è¯•å®Œæ•´æµç¨‹**ï¼šä»REQ-IDæå–åˆ°PRDæ£€æŸ¥çš„å®Œæ•´æµç¨‹
4. **ä¼˜åŒ–é”™è¯¯ä¿¡æ¯**ï¼šç¡®ä¿Task-0çš„è­¦å‘Šå’Œé”™è¯¯éƒ½èƒ½æ­£ç¡®æ˜¾ç¤º

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- å®ç°ä»£ç : `.compliance/checkers/task0_checker.py`
- è§„åˆ™é…ç½®: `.compliance/rules/task0.yaml`
- å¼•æ“é›†æˆ: `.compliance/engine.py`
- è®¾è®¡æ–‡æ¡£: `docs/architecture/V4/AI-WORKFLOW-V4-PART2-TM-ADAPTER.md`

---

**æ€»ç»“**ï¼šå·²ä¿®å¤æ­£åˆ™è¡¨è¾¾å¼ã€è·¯å¾„å¤„ç†å’Œé€»è¾‘é—®é¢˜ï¼Œä½†REQ-IDæå–ä»ç„¶å¤±è´¥ï¼Œéœ€è¦è¿›ä¸€æ­¥è°ƒè¯•ã€‚

_å›ç­”æ¨¡å‹ï¼šClaude 3.5 Sonnet (claude-sonnet-4-20250514)_

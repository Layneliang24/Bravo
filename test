#!/bin/bash
# ä¸€é”®æœ¬åœ°æµ‹è¯•å¿«æ·å‘½ä»¤ - çº¯Dockerç¯å¢ƒ
cd "$(dirname "$0")"

# æ£€æŸ¥Dockerç¯å¢ƒ
if ! command -v docker &> /dev/null; then
    echo "âŒ Dockeræœªå®‰è£…ï¼Œæ— æ³•æ‰§è¡Œæœ¬åœ°éªŒè¯"
    echo "è¯·å®‰è£…Dockeråé‡è¯•"
    exit 1
fi

# å¯åŠ¨éªŒè¯å®¹å™¨ï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
echo "ğŸš€ å¯åŠ¨éªŒè¯å®¹å™¨..."
docker-compose --profile validation up -d validator >/dev/null 2>&1

# ç­‰å¾…å®¹å™¨å¯åŠ¨
sleep 2

# åœ¨å®¹å™¨å†…æ‰§è¡ŒéªŒè¯
echo "ğŸ¯ åœ¨Dockerå®¹å™¨å†…æ‰§è¡Œæœ¬åœ°æµ‹è¯•éªŒè¯..."
docker-compose --profile validation exec validator validate "$@"
